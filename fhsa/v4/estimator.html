<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
   <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Estimators - First home savings account (FHSA) - Canada.ca</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta name="robots" content="noindex, follow">
    <!-- Meta data -->
    <!-- Meta data-->
    <!-- Load closure template scripts -->
    <script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_43/cdts/compiled/soyutils.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_43/cdts/compiled/wet-en.js"></script>
    <link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/wet-boew/css/theme.min.css">
    <link rel="stylesheet" href="https://www.canada.ca/etc/designs/canada/wet-boew/m%C3%A9li-m%C3%A9lo/2023-10-mount-revelstoke.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <style>

      /* CSS Document */
      h1#wb-cont {
          border-bottom: none;
      }
      
      /* Remove text decoration for abbr tags (equations) */
      abbr.brdr-0 {
          text-decoration: none !important;
      }
      
      section.gc-nav h1 {
          font-size: 1.3em;
          color: #555;
          border-bottom: none;
      }
      
      /*page structure desktop (new) */
      @media all and (min-width:992px) {
          section.gc-nav nav {
              position: relative;
              width: 33.33%;
              left: 66.66%;
              float: left;
              padding-left: 15px;
              margin-bottom: 30px;
          }
      
          section.gc-nav h1 {
              width: 66.66%;
              padding-right: 15px;
              margin-top: 20px;
              margin-bottom: -5px;
              font-weight: 200;
          }
      
          section.gc-nav-section {
              position: relative;
              width: 66.66%;
              float: left;
              padding-right: 15px;
          }
      
          section.gc-nav~section.gc-nav-section {
              right: 33.33%;
          }
      
          section.gc-nav~section.gc-nav-section h1 {
              margin-top: 0px
          }
      
          section.gc-nav-section+.pagedetails {
              clear: both;
          }
      }
      
      #gc-navseq-header {
          font-size: 1.2em;
          margin-top: 0px;
      }
      
      .gc-navseq {
          padding-left: 0.9em;
      }
      
      .gc-navseq .small, 
      .gc-navseq small {
          line-height: 0em;
      }
      
      .gc-navseq * {
          font-weight: inherit !important;
          line-height: inherit !important
      }
      
      .gc-navseq>li, 
      ul.gc-navseq-fa>li {
          padding-bottom: 20px;
          padding-right: 20px;
          list-style: none;
          padding-left: 1.2em;
          border-left: 5px solid #26374a;
          position: relative;
      }
      
      ul.gc-navseq-fa>li .fa-li {
          left: 0em;
          position: relative;
      }
      
      ul.gc-navseq-fa {
          margin-left: 0.9em
      }
      
      li .gc-navseq {
          margin-top: 16px;
      }
      
      .gc-navseq>li>:first-child::before, 
      ul.gc-navseq-fa li span.fa-li {
          border-radius: 50%;
          border: 3px solid #26374a;
          background-color: #fff;
          float: left;
          text-decoration: none;
          box-sizing: content-box;
          line-height: 1.3em;
          text-align: center;
          padding: 3px;
          font-size: 1.0em;
          /* transition: width 0.2s, height 0.2s, margin-top 0.2s, font-size 0.2s, margin-left 0.2s, line-height 0.2s; */
      }
      
      ul.gc-navseq-fa li span.fa-li {
          height: 1.3em;
          width: 1.3em;
          margin-left: -2.3em;
      }
      
      ul.gc-navseq>li>:first-child::before {
          height: 0.8em;
          width: 0.8em;
          margin-left: -2.05em;
          content: "";
      }
      
      @-moz-document url-prefix() {
          ul.gc-navseq>li>:first-child::before {
              margin-left: -2.0em;
          }
      }
      
      .gc-navseq li a::before {
          text-decoration: underline;
      }
      
      ul.gc-navseq.noline>li {
          border-left: 5px solid transparent
      }
      
      .gc-navseq>li:last-child, 
      .gc-navseq>li.completed:last-child, 
      ul.gc-navseq-fa li:last-child {
          border-left: 5px solid transparent;
          padding-bottom: 0;
      }
      
      ul.gc-navseq.noline>li>:first-child::before {
          margin-top: 0.2em
      }
      
      /*active*/
      .gc-navseq li.active>:first-child::before, 
      .gc-navseq-fa li.active span.fa-li {
          background-color: #26374a;
          color: #fff;
      }
      
      /*sub-steps*/
      .gc-navseq li ul {
          margin-top: 16px !important;
      }
      
      /*Hover animation */
      ul.gc-navseq>li>a[href]:hover::before {
          width: 0.83em;
          height: 0.83em;
          margin-top: -0.1em;
          font-size: 1.2em;
          margin-left: -1.775em;
          line-height: 1.55;
      }
      
      ul.gc-navseq.noline>li>a[href]:hover::before {
          margin-top: 0.15em;
      }
      
      .gc-navseq-fa>li>a[href]:hover span.fa-li {
          width: 1.55em;
          height: 1.55em;
          margin-top: -0.05em;
          margin-left: -2.45em;
      }
      
      .gc-navseq-fa>li>a[href]:hover span.fa-li::before {
          margin-top: -0.1em;
      }
      
      /*Vertical steps in mobile */
      @media screen and (max-width:991px) {
          section.gc-nav {
              margin-top: 30px;
              border-right: 5px solid #26374a;
              border-top: 5px solid #26374a;
              border-radius: 0 6px 6px 0;
          }
      
          section.gc-nav nav>.gc-navseq {
              padding-top: 15px;
              margin-top: -18px;
              clear: both;
          }
      
          section.gc-nav nav>.gc-navseq>li:last-child {
              border-bottom: 5px solid #26374a;
              border-left: 5px solid #26374a;
              border-bottom-left-radius: 6px;
              padding-bottom: 24px;
          }
      
          section.gc-nav h1 {
              margin-bottom: -18px;
              margin-right: 20px;
              background-color: white;
              padding: 20px 10px 10px 20px;
              display: block;
              margin-left: -20px;
              margin-top: -40px;
              float: left;
          }
      }
      
      /*nav buttons */
      .gc-navseq-nav-btn:hover, 
      .gc-navseq-nav-btn:focus, 
      .gc-navseq-nav-btn:visited {
          display: inline-block;
          color: #fff;
          text-decoration: none;
          padding: 5px;
      }
      
      .gc-navseq-nav-btn {
          background-color: #26374a;
      }
      
      .gc-navseq-nav-btn:hover {
          background-color: #444;
      }
      
      .gc-navseq-nav-btn:not(:focus) {
          clip: rect(1px, 1px, 1px, 1px);
          height: 1px;
          margin: 0;
          overflow: hidden;
          position: absolute;
          width: 1px;
      }
      
      @media all and (min-width:992px) {
          #gc-navseq-nav {
              display: flex;
          }
      }
      
      /*Navigation template in mobile */
      @media all and (max-width:991px) {
          .gc-nav nav {
              padding-top: 40px;
          }
      }
      
      #gc-navseq-nav {
          margin-bottom: 0;
          list-style: none;
          padding-left: 0;
      }
      
      .gc-navseq-nav-btn:focus {
          position: relative;
      }
      
      /* new topic style */
      h1 {
          border-bottom: none;
      }
      
      h1#wb-cont::after {
          content: "";
          /* This is necessary for the pseudo element to work. */
          display: block;
          /* This will put the pseudo element on its own line. */
          width: 70px;
          /* Change this to whatever width you want to have before hover. */
          padding-bottom: 8px;
          /* This creates some space between the element and the border. */
          border-bottom: .18em solid #af3c43;
          /* This creates the border. Replace black with whatever color you want. */
      }
      
      /* Styled ordered list design */
      ol.lst-stps, 
      .lst-stps {
          counter-reset: item;
      }
      
      ol.lst-stps, 
      .lst-stps {
          margin: 15px 0 15px 0px;
          padding-left: 0;
          position: relative;
      }
      
      ol.lst-stps>li, 
      .lst-stps>.lst-item {
          counter-increment: item;
      }
      
      ol.lst-stps>li, 
      .lst-stps .lst-item {
          list-style: none;
          margin-top: 30px;
          position: relative;
          padding-left: 60px;
          padding-right: 15px;
          min-height: 2.2em;
      }
      
      ol.lst-stps fieldset {
          padding-top: 0;
      }
      
      ol.lst-stps li>*:last-child, 
      .lst-stps .lst-item>*:last-child {
          margin-bottom: 0px;
      }
      
      ol.lst-stps>li:before, 
      .lst-stps .lst-item:before {
          content: counter(item);
      }
      
      ol.lst-stps li>ol, 
      .lst-stps .lst-item>.sub-lst-stps {
          counter-reset: subitem;
      }
      
      ol.lst-stps li>ol {
          margin-left: -35px;
      }
      
      .lst-stps .lst-item {
          position: relative;
          padding-left: 60px;
          margin-top: 30px;
      }
      
      ol.lst-stps li:before, 
      .lst-stps .lst-item:before {
          -webkit-border-radius: 50%;
          -moz-border-radius: 50%;
          border-radius: 50%;
          border: 3px solid #26374a;
          background-color: #fff;
          float: left;
          position: absolute;
          box-sizing: content-box;
          line-height: 2.2;
          text-align: center;
          font-weight: 600;
          height: 2.2em;
          width: 2.2em;
          left: 0px;
          margin-top: -8px;
      }
      
      ol.lst-stps>li>ol>li:before, 
      .lst-stps>.lst-item>.sub-lst-stps>.lst-item:before {
          counter-increment: subitem;
          content: counter(item) ""counter(subitem, lower-alpha) "";
      }
      
      .sub-lst-stps>.lst-item:last-child {
          margin-bottom: 0px
      }
      
      .lst-stps-striped>li ol, 
      .lst-stps-striped>.lst-item>.sub-lst-stps {
          margin-top: 15px;
      }
      
      .lst-stps.lst-stps-striped li, 
      .lst-stps.lst-stps-striped .lst-item {
          padding-top: 23px;
          padding-bottom: 23px;
          margin-top: 0px;
      }
      
      .lst-stps-striped>li:nth-child(odd), 
      .lst-stps-striped>li:nth-child(even)>ol>li:nth-child(odd), 
      .lst-stps-striped>li:nth-child(odd)>ol>li:nth-child(even), 
      .lst-stps-striped>.lst-item:nth-child(odd), 
      .lst-stps-striped>.lst-item:nth-child(even)>.sub-lst-stps>.lst-item:nth-child(odd), 
      .lst-stps-striped>.lst-item:nth-child(odd)>.sub-lst-stps>.lst-item:nth-child(even) {
          background-color: #f5f5f5;
      }
      
      .lst-stps-striped>li:nth-child(odd)>ol>li:nth-child(odd), 
      .lst-stps-striped>.lst-item:nth-child(odd)>.sub-lst-stps>.lst-item:nth-child(odd) {
          background-color: #fff !important;
      }
      
      .lst-stps-striped>li:nth-child(even)>ol>li:nth-child(even):last-child, 
      .lst-stps-striped>li:nth-child(odd)>ol>li:nth-child(even):last-child, 
      .lst-stps-striped>.lst-item:nth-child(even)>.sub-lst-stps>.lst-item:nth-child(even):last-child, 
      .lst-stps-striped>.lst-item:nth-child(odd)>.sub-lst-stps>.lst-item:nth-child(even):last-child {
          padding-bottom: 0px;
      }
      
      ol.lst-stps li>:first-child, 
      .lst-stps .lst-item>:first-child {
          margin-top: auto;
      }
      
      ol.lst-stps.lst-stps-striped li, 
      .lst-stps.lst-stps-striped .lst-item {
          padding-left: 75px;
      }
      
      .lst-stps-striped li:before, 
      .lst-stps-striped .lst-item:before {
          margin-left: 15px;
      }
      
      /* ol.lst-stps li ul, ol.lst-stps li ul li, ol.lst-stps.lst-stps-striped li ul, ol.lst-stps.lst-stps-striped li ul li { padding-left: 0px; } */
      @media all and (max-width: 767px) {
      
          ol.lst-stps li:before, 
          .lst-stps .lst-item:before {
              font-size: 0.8em;
              line-height: 2;
              height: 2em;
              width: 2em;
              margin-top: -3px;
              font-weight: 600;
          }
      
          ol.lst-stps>li, 
          .lst-stps>.lst-item {
              padding-left: 45px
          }
      
      
          .lst-stps.lst-stps-striped li, 
          .lst-stps.lst-stps-striped .lst-item {
              padding-top: 19px;
              padding-bottom: 19px;
              margin-top: 0px;
          }
      }
      
      .lst-lwr-alph {
          list-style-position: outside;
      }
      
      .callout {
          padding: 19px;
          margin-bottom: 20px;
          border: 1px solid #e3e3e3;
          box-shadow: 0px 0px 10px #ddd;
      }
      
      /*Checkbox/Fieldflow radio input sizing,positioning*/
      .checkbox-lg>li.checkbox {
          margin-top: 0px;
      }
      
      .checkbox-lg>li {
          margin-left: -40px;
          padding-left: 40px;
          padding-top: 5px;
          padding-bottom: 10px;
          margin-bottom: 5px;
          padding-right: 15px;
      }
      
      .checkbox-zebra>li:nth-child(2n+1) {
          background-color: #f5f5f5;
          padding-top: 10px;
          padding-bottom: 15px;
      }
      
      .checkbox-lg>li.checkbox input[type=checkbox], 
      .fieldflow-lg .radio input[type=radio] {
          margin-top: 12px;
          transform: scale(2);
      }
      
      .checkbox-lg label, 
      .fieldflow-lg, 
      .fieldflow-lg label, 
      .fieldflow-lg div, 
      .fieldflow-lg select, 
      .std-blt {
          font-size: 20px;
          line-height: 1.65em;
      }
      
      .std-blt {
          list-style-type: disc;
      }
      
      .std-blt li label {
          display: block;
          padding-left: 0px;
      }
      
      .fieldflow-lg .radio label {
          margin-left: 40px;
      }
      
      .fieldflow-lg .radio input[type=radio] {
          margin-left: -40px;
      }
      
      .fieldflow-lg fieldset legend {
          font-size: 22px;
          margin-top: 0px;
      }
      
      /*Hide arrows in Chrome/FF for number input*/
      /* Chrome, Safari, Edge, Opera */
      input::-webkit-outer-spin-button, 
      input::-webkit-inner-spin-button {
          -webkit-appearance: none;
          appearance: none;
          margin: 0;
      }
      
      /* Firefox */
      input[type=number] {
          -webkit-appearance: textfield;
          appearance: textfield;
      }
      
      output.wb-calc {
          display: inline;
      }
      
      /*Validation invisible text appearance */
      .wb-frmvld #errors-default .wb-inv, 
      .wb-frmvld .has-error .wb-inv {
          clip: inherit;
          height: inherit;
          margin: inherit;
          overflow: inherit;
          position: inherit;
          width: inherit;
      }
      
      .wb-frmvld .has-error .wb-inv {
          color: #333;
      }
      
      :not(#wb-srch) main form:not(#gc-pg-hlpfl-frm), 
      main .checkbox, 
      main .checkbox-inline, 
      main .radio, 
      main .radio-inline, 
      main form:not(#gc-pg-hlpfl-frm) :not(.btn-call-to-action).btn, 
      main form :not(.btn-primary).btn {
          font-size: 20px !important;
          line-height: 1.65em !important;
      }
      
      /*Lower opacity for placeholders */
      ::-webkit-input-placeholder {
          /* Edge */
          opacity: 0.5;
      }
      
      :-ms-input-placeholder {
          /* Internet Explorer 10-11 */
          opacity: 0.5;
      }
      
      input::placeholder {
          opacity: 0.5;
      }
      
      /*placholder disappears on focus */
      input:focus::-webkit-input-placeholder {
          opacity: 0;
      }
      
      input:focus::placeholder {
          opacity: 0;
      }
      
      /*CSS eqht experimental */
      .wb-eqht-css {
          display: flex;
          flex-wrap: wrap;
          align-items: stretch;
          height: 100%;
      }
      
      .wb-eqht-css .wb-eqht-grid {
          display: flex;
          flex-direction: column;
          flex-grow: 1;
      }
      
      .wb-eqht-css .hght-inhrt-css {
          display: flex;
          flex-direction: column;
          flex: 1 1 auto;
      }
      
      .wb-eqht-css .hght-inhrt-css .eqht-trgt-css {
          flex: 1 1 auto;
      }
    </style>
    <style>
      .provisional.wb-steps .wb-tggle-fildst>legend:before {
          background-color: #fff;
          padding: 4px;
          -webkit-border-radius: 50%;
          -moz-border-radius: 50%;
          border-radius: 50%;
          border: 3px solid #6f6f6f;
          height: 1.2em;
          width: 1.2em;
          box-sizing: content-box;
          margin-right: 10px;
          display: inline-block;
          text-align: center;
          line-height: 1.2;
          content: counter(fieldset_counter) !important;
      }
      
      .panel-default>.panel-heading.wb-steps-active {
          background-color: #fff;
      }
      
      .provisional.wb-steps .wb-tggle-fildst>legend.wb-steps-active:before {
          background-color: #1c578a;
          border-color: #1c578a;
          color: #fff;
      }
      
      .provisional.wb-steps .wb-tggle-fildst>legend:not(.wb-steps-active) {
          font-size: 18px;
      }
      
      .provisional.wb-steps .wb-tggle-fildst>legend.wb-steps-active {
          font-weight: bold;
      }
      
      fieldset+.buttons {
          margin-left: 15px;
      }
      
      .wb-steps-active .panel-title {
          font-size: 1.3em;
      }
      
      fieldset fieldset {
          min-width: 1px;
      }
      
      .ds-example {
          margin-top: 15px;
          border: 1px solid #e3e3e3;
          box-shadow: 0px 0px 8px #e3e3e3;
      }
      
      .ds-example>.wb-tabs>.tabpanels {
          background: #f9f9f9;
      }
      
      .ds-example>.wb-tabs>.tabpanels legend {
          font-size: 80%;
          font-weight: 700;
          margin: 0 0 5px;
      }
      
      .ds-example>.wb-tabs>.tabpanels fieldset {
          padding-top: 0;
      }
      
      .ds-example>.wb-tabs>.tabpanels>details>summary {
          background: #fff;
          border-radius: 0;
      }
      
      .ds-example>.wb-tabs [role=tablist]>li:focus, 
      .ds-example>.wb-tabs [role=tablist]>li:hover {
          background: #ddd;
      }
      
      .ds-example>.wb-tabs {
          margin-bottom: 0;
      }
      
      .ds-example>.wb-tabs>.tabpanels>details {
          margin-bottom: 0;
      }
      
      .ds-example .panel-body {
          box-shadow: none;
      }
      
      @media screen and (max-width: 991px) {
          .ds-example>.wb-tabs .tgl-panel {
              margin-top: 15px;
          }
      }
      
      @media screen and (min-width: 992px) {
          .ds-example>.wb-tabs>.tabpanels>details {
              border: none;
              padding: 15px;
          }
      
          .ds-example>.wb-tabs [role=tablist]>li {
              border: none;
              background: none;
          }
      
          .ds-example>.wb-tabs [role=tablist]>li.active a {
              border-width: 0 0 4px;
          }
      
          .ds-example>.wb-tabs>.tabpanels>details {
              padding: 30px;
          }
      
          .ds-example>.wb-tabs>.tabpanels>details {
              background: #f9f9f9;
              padding: 30px;
              margin-bottom: 0;
          }
      }
      
      .prev-wb-step .btn-lgnd {
          margin: 1px;
          text-decoration-line: underline;
      }
      
      .prev-wb-step:focus, 
      .prev-wb-step:hover {
          color: #0535d2;
      }
      
      .prev-wb-step:focus {
          outline: 5px auto;
          outline-offset: -2px;
      }
    </style>
    <style>
        .wb-input-range>datalist {
            justify-content: space-between;
        }

        .wb-input-range>output.wb-input-range-display, div.wb-input-range-display {
            font-size: 20px;
            min-width: 2em;
            text-align: center;
            position: absolute;
            left: 50%;
            padding-left: 6px;
            padding-right: 6px;
            transform: translate(-50%, -2.7em);
            border-radius: 6px;
            background: #e3e3e3;
        }

        output.wb-input-range-display {
            padding-top: 0px;
        }
    </style>


    <!-- Write closure template -->
    <script>
        document.write(wet.builder.refTop({}));
    </script>
</head>

<body vocab="http://schema.org/" typeof="WebPage" class="experimental">
    <div id="def-top">
    </div>
    <!-- Write closure template -->
    <script>
        var defTop = document.getElementById("def-top");
        defTop.outerHTML = wet.builder.top({
            lngLinks: [{
                lang: "fr", 
                href: "#", 
                text: "Français"
            }], 
            breadcrumbs: [{
                title: "Canada.ca", 
                href: "https://www.canada.ca/en.html"
            }, {
                title: "Taxes", 
                href: "https://www.canada.ca/en/services/taxes.html"
            }, {
                title: "Savings and pension plans", 
                href: "https://www.canada.ca/en/services/taxes/savings-and-pension-plans.html"
            }, {
                title: "First Home Savings Account (FHSA)", 
                href: "index.html"
            }], 
            search: true, 
            siteMenu: true, 
            showPreContent: true
        });
    </script>
    <main property="mainContentOfPage" class="container">

        <h1 property="name" id="wb-cont" class="gc-thickline">FHSA estimators</h1>
        <p>You can use these estimators to help you understand how a first home savings account (FHSA) can help you save for your first home. The first tool estimates how much you can save for your down payment, and the second tool shows your potential tax savings.</p>
        <p><a href="index.html">Learn about the FHSA</a> before using these tools.</p>
        <p>These tools provide <strong>estimates</strong> based on the information you entered. They are intended for illustrative and general information purposes. They may not fully capture your particular tax situation, which may affect the accuracy of the results. The results generated are examples only.</p>
        <p>Your data is not collected or saved. If you leave or refresh the page, you will need to enter your information again.</p>
        <ul class="list-unstyled">
            <li>
                <details>
                    <summary>Read the privacy statement for the estimator tools</summary>
                    <p>The CRA is not collecting or retaining any of the information you enter on this page. The estimators' results are rough estimates and are based on the information that you entered. The results should not be considered financial advice. The results that are obtained after using these interactive tools are not binding on the CRA.</p>
                </details>
            </li>
        </ul>
    <div class="mwsbodytext text parbase section">
        <div class="row">
            <div class="col-sm-12">
                <h2>Down payment estimator</h2>
                <p>Estimate how much you can save for your down payment by participating in an FHSA.</p>
            </div>
            <div class="wb-frmvld col-sm-12 provisional wb-steps">
                <form id="fhsa_downpay_form" name="fhsa_cal_form" action="#" method="get" autocomplete="off" class="panel panel-default">
                    <!-- Form 1 STEP 1-->
                    <fieldset id="priorPaymentCheck" class="panel-default p-0">
                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">FHSA participation in <span data-first-year-date="true">prior years</span></span></legend>
                        <div class="panel-body mrgn-lft-sm">

                            <fieldset id="priorPaymentCheck-question" class="mrgn-lft-md">

                                <legend class="mrgn-bttm-0 required gc-font-2019" tabindex="-1"><strong><span class="field-name">Did you open or participate in your FHSA in <span data-first-year-date="true">prior years</span>?</span></strong> <strong class="required">(required)</strong></legend>
                                <p id="hasPriorPaymentDescription" class="small">Your FHSA participation includes contributing and transferring property into your FHSAs</p>
                                <ul class="list-unstyled gc-chckbxrdio chckbxrdio-grp">
                                    <li class="radio">
                                        <input type="radio" name="hasPriorPaymentFHSA" id="priorpayment-fhsa-true" value="true" data-priorpayment-fhsa="true" data-rule-required="true" aria-describedby="hasPriorPaymentDescription">
                                        <label for="priorpayment-fhsa-true">Yes</label>
                                    </li>
                                    <li class="radio">
                                        <input type="radio" name="hasPriorPaymentFHSA" id="priorpayment-fhsa-false" value="false" data-priorpayment-fhsa="false" data-rule-required="true" aria-describedby="hasPriorPaymentDescription">
                                        <label for="priorpayment-fhsa-false">No</label>
                                    </li>
                                </ul>
                            </fieldset>


                            <div id="priorPaymentFHSAfields" class="mrgn-lft-md hidden">
<!--
                                <div class="mrgn-tp-md gc-chckbxrdio chckbxrdio-grp provisional">
                                    <div class="checkbox">
                                        <input id="priorPaymentSameInfo" name="priorPaymentSameInfo" type="checkbox" value="true" data-same-prior="true">
                                        <label for="priorPaymentSameInfo"><span class="gc-font-2019">Use the "prior years" information from the second tool</span></label>
                                    </div>
                                </div>
-->
                                <div id="priorPaymentAmountFHSAElm" class="form-group">
                                    <label id="priorPaymentYearsFHSALabel" for="priorPaymentYearsFHSA" class="required"><span class="field-name">Number of years your FHSA has been open</span> (<span data-prior-year-range="true">1 to </span><span data-max-prior-years="true">14</span> year<span data-prior-year-range="true">s</span> max) <strong class="required">(required)</strong></label>
                                    <p data-single-year-range="true">If you opened your FHSA in 2023, enter "1" as the number of years</p>
                                    <div class="input-group col-xs-2 col-sm-1">
                                        <input type="number" name="priorPaymentYearsFHSA" min="1" max="14" id="priorPaymentYearsFHSA" data-rule-minlength="1" data-rule-maxlength="2" class="form-control text-right" data-rule-rangelength="[1,14]">
                                    </div>
                                </div>
                                <div id="priorPaymentBalanceElm" class="form-group">
                                    <label id="priorPaymentBalanceLabel" for="priorPaymentBalance" class="required"><span class="field-name">Your<span data-first-year="true" class="hidden"> current</span> FHSA balance<span data-first-year="false"> as of December 31, <span data-prior-year="true">2023</span></span></span> <span class="wb-inv">(dollars only, no cents) </span><strong class="required">(required)</strong></label>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorPaymentBalance" size="7" maxlength="7" id="priorPaymentBalance" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                                <div id="priorPaymentYearsFHSAElm" class="form-group">
                                    <label id="priorPaymentAmountFHSALabel" for="priorPaymentAmountFHSA" class="required"><span class="field-name">Your total FHSA participation for <span data-first-year-date="true">prior years</span></span><span class="wb-inv"> (dollars only, no cents)</span> <strong class="required">(required)</strong></label>
                                    <p>Include all amounts you have contributed and transferred</p>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorPaymentAmountFHSA" size="7" maxlength="7" id="priorPaymentAmountFHSA" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" min="1" max="40000" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>


                    <!-- Form 1 STEP 2-->
                    <fieldset id="currentPaymentFHSA" class="panel-default p-0">

                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Planned FHSA participation</span></legend>
                        <div class="panel-body mrgn-lft-sm mrgn-bttm-lg">

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="paymentYears">Number of years you plan to participate in your FHSA</label>
                                </div>
                                <div class="col-md-12">
                                    <div class="wb-input-range form-group">
                                        <datalist id="paymentYearsList" class="d-flex mrgn-tp-xl">
                                            <!--[if lte IE 9]><select><![endif]-->
                                            <option value="1" label="1"></option>
                                            <option value="3"></option>
                                            <option value="6"></option>
                                            <option value="9"></option>
                                            <option value="12"></option>
                                            <option value="15" label="15"></option>
                                            <!--[if lte IE 9]></select><![endif]-->
                                        </datalist>
                                        <input id="paymentYears" class="form-range" type="range" min="1" max="15" value="1" step="1" list="paymentYearsList" aria-describedby="range-instruction">
                                        <output for="paymentYears" class="wb-input-range-display" id="paymentYearsOutput"></output>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="form-group">
                                <div class="mrgn-lft-md mrgn-tp-lg">
                                    <label for="paymentAmount"><span class="field-name">Amount you plan to contribute and transfer yearly to your FHSA ($250 increments)</span></label>
                                </div>
                                <div class="col-md-12">
                                    <div class="wb-input-range form-group mrgn-bttm-md">
                                        <datalist id="paymentAmountList" class="d-flex mrgn-tp-xl">
                                            <!--[if lte IE 9]><select><![endif]-->
                                            <option value="0" label="$0"></option>
                                            <option value="1000"></option>
                                            <option value="2000"></option>
                                            <option value="3000"></option>
                                            <option value="4000"></option>
                                            <option value="5000"></option>
                                            <option value="6000"></option>
                                            <option value="7000"></option>
                                            <option value="8000" label="$8,000"></option>
                                            <!--[if lte IE 9]></select><![endif]-->
                                        </datalist>
                                        <input id="paymentAmount" class="form-range" type="range" min="0" max="8000" value="0" step="250" list="paymentAmountList" aria-describedby="range-instruction">
                                        <output for="paymentAmount" class="wb-input-range-display" data-wb-input-range='{"func": "currencyFormatter.format"}' id="paymentAmountOutput"></output>
                                    </div>
                                </div>
                            </div>

                            <div class="clearfix"></div>

                            <div id="paymentInvestPercentGroup" class="form-group mrgn-tp-sm">
                                <div class="mrgn-lft-md">
                                    <label for="paymentInterest" class="required"><span class="field-name">Expected annual rate of return from your investments (e.g. 1.75%)</span> <strong class="required">(required)</strong></label>
                                    <p><a href="#return-rate-help" aria-controls="return-rate-help" class="wb-lbx" role="button">What is an annual rate of return from your investments? <span class="glyphicon glyphicon-question-sign"></span></a></p>
                                </div>
                                <div class="input-group mrgn-lft-md col-xs-5 col-sm-2">
                                    <input type="text" name="paymentInterest" id="paymentInterest" class="form-control input-lg text-right" inputmode="decimal" pattern="^\d{1,2}(\.\d{1,2})?$" min="0.01" max="99.99" required="required">
                                    <span class="input-group-addon">%</span>
                                </div>
                            </div>

                            <div class="clearfix"></div>
                            <button id="paymentresultsbtn" type="button" class="mrgn-lft-md mrgn-tp-md mrgn-bttm-md btn btn-primary btn-lg" data-btn-activated="Update results">Generate results</button>
                            <div class="col-xs-12 table-responsive">
                                <div id="holdingsResults" class="hidden" aria-live="polite">
                                    <hr>
                                    <h3>Account holdings estimate</h3>
                                    <p class="small">Based on the information you entered, the amount in your FHSA that you could put towards a down payment could possibly be:</p>
                                    <ul class="list-unstyled">
                                        <li><strong data-output="holdings-total">$0</strong> in total account holdings</li>
                                        <li id="paymentGrowthResult">including <strong data-output="investment-growth-total">$0</strong> in investment growth</li>
                                         <li>after <strong data-output="payment-years">0</strong> year<span data-payment-year-range="true">s</span><span id="paymentThresholdData">. By year <strong><span id="paymentThresholdYear" data-threshold-year="true">0</span></strong>, you will have reached your lifetime FHSA limit of <strong><span id="paymentMaxContributeTotal" data-max-contribution="true">$40,000</span></strong>.</span></li>
                                    </ul>

                                    <table id="holdingsresultstable" class="text-right table table-condensed table-bordered table-striped table-hover" data-wb-charts="{&quot;reversettblparsing&quot;: true, &quot;legendinline&quot;: true}" data-flot="{&quot;series&quot;: {&quot;area&quot;: {&quot;label&quot;: {&quot;show&quot;: true}}}}">
                                        <caption>Account holdings by type</caption>
                                        <thead>
                                            <tr class="bg-primary">
                                                <th class="text-left">Years</th>
                                                <th class="text-right" data-flot="{&quot;color&quot;:&quot;#2d7da6&quot;}">Amounts contributed or transferred</th>
                                                <th class="text-right" data-flot="{&quot;area&quot;:{&quot;show&quot;: false}}">Investment income</th>
                                                <th class="text-right" data-flot="{&quot;color&quot;:&quot;#285228&quot;}">Total account holdings</th>
                                            </tr>
                                        </thead>
                                        <tbody id="holdingsResultsBody" data-prior-payment-year-rows="1 to ">
                                        </tbody>
                                    </table>
                                    <p>These results may not fully capture your particular financial situation, which  may affect their accuracy.</p>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <input id="calc-paymemt-fhsa" class="btn btn-primary hidden" type="submit" value="Generate results">
                </form>
            </div>
        </div>




        <div class="row">
            <div class="col-sm-12">
                <h2>Potential tax savings estimator</h2>
                <p>Estimate how much tax you could potentially save by participating in an FHSA.</p>
            </div>
            <div class="wb-frmvld col-sm-12 provisional wb-steps">
                <form id="fhsa_taxsavings_form" name="fhsa_cal_form" action="#" method="get" autocomplete="off" class="panel panel-default mrgn-bttm-md">




                    <!-- Form 2 STEP 1-->
                    <fieldset id="priorSavingsCheck" class="panel-default p-0">
                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">FHSA participation in prior years</span></legend>
                        <div class="panel-body mrgn-lft-sm">

                            <fieldset id="priorSavingsCheck-question" class="mrgn-lft-md">

                                <legend class="mrgn-bttm-0 required gc-font-2019" tabindex="-1"><strong><span class="field-name">Did you open or participate in your FHSA in prior years?</span></strong> <strong class="required">(required)</strong></legend>
                                <p id="hasPriorSavingsDescription" class="small"><span data-first-year="true" class="hidden">If you opened your FHSA in <span data-prior-year="true">2023</span></span> and would like to see estimated tax savings for that year, select "No". </span>Your FHSA participation includes contributing and transferring property into your FHSAs</p>
                                <ul class="list-unstyled gc-chckbxrdio chckbxrdio-grp">
                                    <li class="radio">
                                        <input type="radio" name="hasPriorSavingFHSA" id="priorsaving-fhsa-true" value="true" data-priorsaving-fhsa="true" data-rule-required="true" aria-describedby="hasPriorSavingsDescription">
                                        <label for="priorsaving-fhsa-true">Yes</label>
                                    </li>
                                    <li class="radio">
                                        <input type="radio" name="hasPriorSavingFHSA" id="priorsaving-fhsa-false" value="false" data-priorsaving-fhsa="false" data-rule-required="true" aria-describedby="hasPriorSavingsDescription">
                                        <label for="priorsaving-fhsa-false">No</label>
                                    </li>
                                </ul>
                            </fieldset>


                            <div id="priorSavingFHSAfields" class="mrgn-lft-md hidden">
<!--
                                <div class="mrgn-tp-md gc-chckbxrdio chckbxrdio-grp provisional">
                                    <div class="checkbox">
                                        <input id="priorSavingsSameInfo" name="priorSavingsSameInfo" type="checkbox" value="true" data-same-prior="true">
                                        <label for="priorSavingsSameInfo"><span class="gc-font-2019">Use the "<span data-first-year-date="true">prior years</span>" information from the first tool</span></label>
                                    </div>
                                </div>
-->
                                <div id="priorSavingAmountFHSAElm" class="form-group">
                                    <label id="priorSavingYearsFHSALabel" for="priorSavingYearsFHSA" class="required"><span class="field-name">Number of years your FHSA has been open</span> (<span data-prior-year-range="true">1 to </span><span data-max-prior-years="true">14</span> year<span data-prior-year-range="true">s</span> max) <strong class="required">(required)</strong></label>
                                    <p data-single-year-range="true">If you opened your FHSA in 2023, enter "1" as the number of years</p>
                                    <div class="input-group col-xs-2 col-sm-1">
                                        <input type="number" name="priorSavingYearsFHSA" min="1" max="14" id="priorSavingYearsFHSA" class="form-control text-right" data-rule-minlength="1" data-rule-maxlength="2" data-rule-rangelength="[1,14]">
                                    </div>
                                </div>
                                <div id="priorSavingBalanceElm" class="form-group">
                                    <label id="priorSavingBalanceLabel" for="priorSavingBalance" class="required"><span class="field-name">Your<span data-first-year="true" class="hidden"> current</span> FHSA balance<span data-first-year="false"> as of December 31, <span data-prior-year="true">2023</span></span></span><span class="wb-inv"> (dollars only, no cents)</span> <strong class="required">(required)</strong></label>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorSavingBalance" size="7" maxlength="7" id="priorSavingBalance" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                                <div id="priorSavingYearsFHSAElm" class="form-group">
                                    <label id="priorSavingAmountFHSALabel" for="priorSavingAmountFHSA" class="required"><span class="field-name">Your total FHSA participation for prior years</span><span class="wb-inv"> (dollars only, no cents)</span> <strong class="required">(required)</strong></label>
                                    <p>Include all amounts you have contributed and transferred</p>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorSavingAmountFHSA" size="7" maxlength="7" id="priorSavingAmountFHSA" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" min="1" max="40000" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>




                    <!-- Form 2 STEP 2-->
                    <fieldset id="currentSavingsFHSA" class="panel-default p-0">

                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Planned FHSA participation</span></legend>
                        <div class="panel-body mrgn-lft-md mrgn-bttm-lg">

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="province" class="required"><span class="field-name">Province or Territory of residence</span> <strong class="required">(required)</strong></label>
                                </div>
                                <select name="province" id="province" class="form-control input-lg mrgn-lft-md" required="required" data-fed="Federal">
                                    <option value="">Select residence location</option>
                                    <option value="Alberta">Alberta</option>
                                    <option value="British Columbia">British Columbia</option>
                                    <option value="Manitoba">Manitoba</option>
                                    <option value="New Brunswick">New Brunswick</option>
                                    <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                    <option value="Northwest Territories">Northwest Territories</option>
                                    <option value="Nova Scotia">Nova Scotia</option>
                                    <option value="Nunavut">Nunavut</option>
                                    <option value="Ontario">Ontario</option>
                                    <option value="Prince Edward Island">Prince Edward Island</option>
                                    <option value="Quebec" data-id="QC">Quebec</option>
                                    <option value="Saskatchewan">Saskatchewan</option>
                                    <option value="Yukon">Yukon</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="approxYearlyIncome" class="required"><span class="field-name">Approximate yearly taxable income</span><span class="wb-inv"> (dollars only, no cents)</span> <strong class="required">(required)</strong></label>
                                    <p>Do not reduce your <a href="#taxable-income-help" aria-controls="taxable-income-help" class="wb-lbx" role="button">taxable income <span class="glyphicon glyphicon-question-sign"></a> by any FHSA contributions you plan to make</p>
                                </div>
                                <div class="input-group mrgn-lft-md col-lg-3 col-sm-4 col-xs-6">
                                    <span class="input-group-addon">$</span>
                                    <input type="text" name="approxYearlyIncome" size="7" maxlength="7" id="approxYearlyIncome" class="form-control input-lg text-right" required="required" inputmode="decimal" pattern="[0-9]*">
                                    <span class="input-group-addon">.00</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="savingYears"><span class="field-name">Number of years you plan to participate in your FHSA</span></label>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-md-12">
                                    <div class="wb-input-range form-group">
                                        <datalist id="savingYearsList" class="d-flex mrgn-tp-xl">
                                            <!--[if lte IE 9]><select><![endif]-->
                                            <option value="1" label="1"></option>
                                            <option value="3"></option>
                                            <option value="6"></option>
                                            <option value="9"></option>
                                            <option value="12"></option>
                                            <option value="15" label="15"></option>
                                            <!--[if lte IE 9]></select><![endif]-->
                                        </datalist>
                                        <input id="savingYears" class="form-range" type="range" min="1" max="15" value="1" step="1" list="savingYearsList" aria-describedby="range-instruction">
                                        <output for="savingYears" class="wb-input-range-display" id="savingYearsOutput"></output>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="well mrgn-rght-md mrgn-tp-sm">
                                <div class="form-group">
                                    <div class="mrgn-lft-md">
                                        <label for="savingsAmount"><span class="field-name">Total amount you plan to both contribute and transfer yearly to your FHSA ($250 increments)</span></label>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="col-md-12">
                                        <div class="wb-input-range form-group">
                                            <datalist id="yearlySavingsAmountList" class="d-flex mrgn-tp-xl">
                                                <!--[if lte IE 9]><select><![endif]-->
                                                <option value="0" label="$0"></option>
                                                <option value="1000"></option>
                                                <option value="2000"></option>
                                                <option value="3000"></option>
                                                <option value="4000"></option>
                                                <option value="5000"></option>
                                                <option value="6000"></option>
                                                <option value="7000"></option>
                                                <option value="8000" label="$8,000"></option>
                                                <!--[if lte IE 9]></select><![endif]-->
                                            </datalist>
                                            <input id="savingsAmount" class="form-range" type="range" min="0" max="8000" value="0" step="250" list="yearlySavingsAmountList" aria-controls="savingsDirectAmount" aria-describedby="range-instruction">
                                            <output for="savingsAmount" class="wb-input-range-display" data-wb-input-range='{"func": "currencyFormatter.format"}' id="savingsAmountOutput"></output>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                                <div class="form-group mrgn-tp-lg">
                                    <div class="mrgn-lft-md">
                                        <label for="savingsDirectAmount"><span class="field-name">How much of this amount will be contributions? (not transfers) ($250 increments)</span></label>
                                        <p id="direct-relation-info">The amount you contribute might equal or only be a portion of your total contributions and transfers, but it cannot exceed that total amount</p>
                                        <p class="mrgn-bttm-0"><a href="#direct-contribute-help" aria-controls="direct-contribute-help" class="wb-lbx" role="button">What is the difference between transfers versus contributions in your FHSA? <span class="glyphicon glyphicon-question-sign"></span></a></p>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="wb-input-range form-group">
                                            <datalist id="savingsDirectAmountList" class="d-flex mrgn-tp-xl">
                                                <!--[if lte IE 9]><select><![endif]-->
                                                <option value="0" label="$0"></option>
                                                <option value="1000"></option>
                                                <option value="2000"></option>
                                                <option value="3000"></option>
                                                <option value="4000"></option>
                                                <option value="5000"></option>
                                                <option value="6000"></option>
                                                <option value="7000"></option>
                                                <option value="8000" label="$8,000"></option>
                                                <!--[if lte IE 9]></select><![endif]-->
                                            </datalist>
                                            <input id="savingsDirectAmount" class="form-range" type="range" min="0" max="8000" value="0" step="250" list="savingsDirectAmountList" aria-controls="savingsAmount" aria-describedby="direct-relation-info range-instruction">
                                            <output for="savingsDirectAmount" class="wb-input-range-display" data-wb-input-range='{"func": "currencyFormatter.format"}'  id="savingsDirectAmountOutput"></output>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>


                            <fieldset id="hasSavingInvestment-question" class="mrgn-lft-md">
                                <legend class="mrgn-bttm-sm required gc-font-2019" tabindex="-1"><strong><span class="field-name">Would you like to include the expected rate of investment growth for your FHSA?</span></strong> <strong class="required">(required)</strong></legend>
                                <div class="clearfix"></div>
                                <ul class="list-unstyled gc-chckbxrdio chckbxrdio-grp">
                                    <li class="radio">
                                        <input type="radio" name="hasSavingInvestment" id="hasSavingInvestment-true" value="true" data-hassavinginvestment="true" data-rule-required="true" required="required">
                                        <label for="hasSavingInvestment-true">Yes</label>
                                    </li>
                                    <li class="radio">
                                        <input type="radio" name="hasSavingInvestment" id="hasSavingInvestment-false" value="false" data-hassavinginvestment="false" data-rule-required="true" required="required">
                                        <label for="hasSavingInvestment-false">No</label>
                                    </li>
                                </ul>
                            </fieldset>


                            <div id="savingInvestPercentGroup" class="form-group hidden">
                                <div class="mrgn-lft-md">
                                    <label for="savingInterest" class="required"><span class="field-name">Expected annual rate of return from your investments (e.g. 1.75%)</span> <strong class="required" aria-hidden="true">(required)</strong></label>
                                    <p><a href="#return-rate-help" aria-controls="return-rate-help" class="wb-lbx" role="button">What is an annual rate of return from your investments? <span class="glyphicon glyphicon-question-sign"></span></a></p>
                                </div>
                                <div class="input-group mrgn-lft-md col-xs-5 col-sm-2">
                                    <input type="text" name="savingInterest" id="savingInterest" class="form-control input-lg text-right" inputmode="decimal" pattern="^\d{1,2}(\.\d{1,2})?$" min="0.01" max="99.99">
                                    <span class="input-group-addon">%</span>
                                </div>
                            </div>


                            <div class="clearfix"></div>
                            <button id="savingsresultsbtn" type="button" class="mrgn-lft-md mrgn-tp-md mrgn-bttm-md btn btn-primary btn-lg" data-btn-activated="Update results">Generate results</button>

                            <div id="savingsResults" class="table-responsive hidden" aria-live="polite">
                                <hr>
                                <h3>Potential tax savings</h3>
                                <p class="small" data-min-threshold="true">Based on the information you entered, your potential FHSA tax savings could be approximately:</p>
                                <p class="hidden" data-min-threshold="false">Based on the information you entered, your yearly taxable income is below the basic personal amount, which means you don't have to pay income tax. Therefore, you would not have any tax savings from your FHSA for these years. However, your unused FHSA contributions can be carried forward and may result in tax savings if your income increases in the future. To get an estimate of potential tax savings, you can enter a higher estimate of your future annual income into the tool.</p>
                                <ul class="list-unstyled">
                                    <li data-min-threshold="true"><span data-output="area-tax"><strong>$0</strong> to <strong>$0</strong></span> in <span data-area-name="provincial-territorial">provincial and territorial</span> tax</li>
                                    <li data-min-threshold="true"><span data-output="fed-tax"><strong>$0</strong> to <strong>$0</strong></span> in federal tax</li>
                                    <li><span data-min-threshold="true">after <strong data-output="saving-years">0</strong> year<span data-savings-year-range="true">s</span></span><span id="savingsThresholdData"><span data-min-threshold="true">. </span>By year <strong><span id="savingsThresholdYear" data-threshold-year="true">0</span></strong>, you will have reached your lifetime FHSA limit of <strong><span id="savingsContributeTotal" data-max-contribution="true">$40,000</span></strong>.</span></li>
                                </ul>
                               <p data-zero-val="true">You must include contributions or investment income to get tax savings from your FHSA.</p>
                               <p data-show-prior="true">These results do not display tax savings for information you entered for prior years</p>
                                <table data-min-threshold="true" id="savingsTable" class="table table-condensed table-bordered table-striped table-hover">
                                    <caption>Your potential FHSA tax savings</caption>
                                    <thead>
                                        <tr>
                                            <th>Years</th>
                                            <th class="col-sm-2 text-right">Total FHSA participation (cumulative)</th>
                                            <th class="col-sm-2 text-right">Deductible FHSA contributions</th>
                                            <th class="col-sm-1 text-right">Investment income</th>
                                            <th class="text-right">Potential <span data-area-name="provincial-territorial">Provincial and territorial</span> tax savings</th>
                                            <th class="text-right">Potential federal tax savings</th>
                                        </tr>
                                    </thead>
                                    <tbody id="savingsResultsBody" class="text-right" data-prior-savings-year-rows="1 to " data-savings-range-text=" to " data-savings-text="up to " data-total-header="Total">
                                    </tbody>
                                </table>
                                <p>These results may not fully capture your particular tax situation, which may affect their accuracy. These results include tax savings from deductible FHSA contributions as well as the investments that would have otherwise been included in income.<span data-min-threshold="true"> Investment income savings are based on taxing this income at your highest possible tax rate.</span></p>
                            </div>
                        </div>
                    </fieldset>
                    <input id="calc-savings-fhsa" class="btn btn-primary hidden" type="submit" value="Generate results">
                </form>
            </div>

      <section id="direct-contribute-help" class="mfp-hide modal-dialog modal-content overlay-def">
          <header class="modal-header">
              <h2 class="modal-title">What is the difference between transfers versus contributions in your FHSA?</h2>
          </header>
          <div class="modal-body">
              <p>Transfers refer to amounts directly transferred to your FHSA from your RRSP. Unlike transfers, contributions are tax-deductible amounts that are contributed into your FHSA. Together, transfers and contributions cannot exceed your available FHSA participation room.</p>
          </div>
      </section>
      <section id="return-rate-help" class="mfp-hide modal-dialog modal-content overlay-def">
        <header class="modal-header">
            <h2 class="modal-title">What is your expected annual rate of return on your investments?</h2>
        </header>
        <div class="modal-body">
            <p>This is the investment income you expect to earn on the amounts you contribute or transfer to your FHSA. For example, if your expected annual rate of return on investments was 5%, you would earn $50 of investment income on $1,000 contributed or transferred to your FHSA.</p>
        </div>
    </section>
      <section id="taxable-income-help" class="mfp-hide modal-dialog modal-content overlay-def">
        <header class="modal-header">
            <h2 class="modal-title">Taxable income</h2>
        </header>
        <div class="modal-body">
            <p>This is your total income minus all your eligible deductions like child care expenses, RRSP deductions and other employment expenses.</p>
        </div>
    </section>
    <template id="noInvestText">
        <abbr title="Not applicable">N/A</abbr>
    </template>
    <p id="range-instruction" class="hidden">Use the arrow keys or drag the control to increase or decrease the value</p>
</div>
</div>


        <div class="mwsgeneric-base-html parbase section">
            <div class="row row-no-gutters mrgn-tp-xl">
                <div class="col-sm-7 col-lg-6">
                    <section class="gc-pg-hlpfl provisional">
                        <div class="well mrgn-bttm-0">
                            <form id="gc-pg-hlpfl-frm" action="/gc/services/generateemail" method="post" autocomplete="off" class="provisional wb-postback" data-wb-postback="{&quot;success&quot;:&quot;.gc-pg-hlpfl-thnk&quot;,&quot;content&quot;:&quot;#gc-pg-hlpfl-frm&quot;}">
                                <input type="hidden" name="institutionopt" value="CRA">
                                <input type="hidden" name="themeopt" value="Taxes">
                                <input type="hidden" name="sectionopt" value="FHSA">
                                <input type="hidden" name="pageTitle" value="First home savings account estimator - First home savings account">
                                <input type="hidden" name="emailTemplate" value="servcan/gc-pagesuccessen">
                                <div class="gc-pg-hlpfl-btn">
                                    <div class="row row-no-gutters">
                                        <div class="col-xs-12 col-sm-7 mrgn-tp-sm">
                                            <h2 class="mrgn-tp-sm h5">Did you find what you were looking for?</h2>
                                        </div>
                                        <div class="col-xs-8 col-sm-5 text-right">
                                            <button type="submit" name="helpful" value="Yes" class="btn btn-primary" data-gc-analytics-wtph>Yes</button>
                                            <button type="button" class="btn btn-primary mrgn-lft-sm nojs-hide" data-wb-doaction="[{&quot;action&quot;:&quot;removeClass&quot;,&quot;source&quot;:&quot;.gc-pg-hlpfl-no&quot;,&quot;class&quot;:&quot;nojs-show&quot;}, {&quot;action&quot;:&quot;addClass&quot;,&quot;source&quot;:&quot;.gc-pg-hlpfl-btn&quot;,&quot;class&quot;:&quot;hide&quot;}]" data-gc-analytics-wtph-no>No</button>
                                        </div>
                                    </div>
                                </div>
                                <p class="h3 hidden nojs-show">If not, tell us why:</p>
                                <div class="gc-pg-hlpfl-no nojs-show">
                                    <fieldset>
                                        <legend class="h4 mrgn-tp-0 mrgn-bttm-md">What was wrong?</legend>
                                        <div class="radio">
                                            <label for="problem1">
                                                <input name="problem" id="problem1" type="radio" value="I can't find the information" data-gc-analytics-wtph-value="I can't find the information-Je ne peux pas trouver l'information" data-gc-analytics-collect="notPrivate">
                                                I can't <strong>find</strong> the information
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label for="problem2">
                                                <input name="problem" id="problem2" type="radio" value="The information is hard to understand" data-gc-analytics-wtph-value="The information is hard to understand-L'information est difficile à comprendre" data-gc-analytics-collect="notPrivate"> 
                                                The information is hard to <strong>understand</strong>
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label for="problem3">
                                                <input name="problem" id="problem3" type="radio" value="There was an error / something didn't work" data-gc-analytics-wtph-value="There was an error or something didn't work-Il y avait une erreur ou quelque chose ne fonctionnait pas" data-gc-analytics-collect="notPrivate">
                                                There was an error or something <strong>didn't work</strong>
                                            </label>
                                        </div>
                                        <div class="radio">
                                            <label for="problem4">
                                                <input name="problem" id="problem4" type="radio" value="Other reason" data-gc-analytics-wtph-value="Other reason-Autre raison" data-gc-analytics-collect="notPrivate">
                                                Other reason
                                            </label>
                                        </div>
                                    </fieldset>
                                    <label for="problem6" class="mrgn-bttm-0">Please provide more details</label>
                                    <p class="small"><strong>You will not receive a reply. Telephone numbers and email addresses will be removed.</strong><br><span class="small">Maximum 300 characters</span></p>
                                    <textarea id="problem6" name="details" class="full-width" maxlength="300"></textarea>
                                    <button type="submit" name="helpful" value="No" class="btn btn-primary mrgn-tp-md mrgn-bttm-sm" data-gc-analytics-wtph-submit>Submit</button>
                                </div>
                                <input type="hidden" name="problem" value="">
                            </form>
                            <div class="gc-pg-hlpfl-thnk hide">
                                <p class="h6 mrgn-tp-sm mrgn-bttm-sm"><span class="far fa-check-circle text-success mrgn-rght-sm" aria-hidden="true"></span>Thank you for your feedback</p>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="col-sm-3 col-sm-offset-1 col-lg-offset-3">
                    <div class="wb-share" data-wb-share="{&quot;pnlId&quot;:&quot;pnlShrPg&quot;, &quot;lnkClass&quot;: &quot;btn btn-default btn-block mrgn-tp-md&quot;}">
                </div>
            </div>
        </div>
    </div>


        <div class="pagedetails">
            <dl id="wb-dtmd">
                <dt>Date modified:</dt>
                <dd><time property="dateModified">2023-11-16</time></dd>
            </dl>
        </div>
    </main>


    <div class="newpar new section"></div>
    <div class="par iparys_inherited"></div>
    <div class="newpar new section"></div>
    <div class="par iparys_inherited">
        <div class="global-footer">
            <footer id="wb-info">
                <h2 class="wb-inv">About this site</h2>
                <div class="gc-contextual">
                    <div class="container">
                        <nav>
                            <h3>Canada Revenue Agency (CRA)</h3>
                            <ul class="list-col-xs-1 list-col-sm-2 list-col-md-3">
                                <li><a href="/en/revenue-agency/corporate/contact-information.html">Contact the CRA</a></li>
                                <li><a href="/en/revenue-agency/corporate/about-canada-revenue-agency-cra.html">About the CRA</a></li>
                                <li><a href="/en/revenue-agency/programs/about-canada-revenue-agency-cra/compliance.html">Compliance and enforcement</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="gc-main-footer">
                    <div class="container">
                        <nav>
                            <h3>Government of Canada</h3>
                            <ul class="list-unstyled colcount-sm-2 colcount-md-3">
                                <li><a href="/en/contact.html">All contacts</a></li>
                                <li><a href="/en/government/dept.html">Departments and agencies</a></li>
                                <li><a href="/en/government/system.html">About government</a></li>
                            </ul>
                            <h4><span class="wb-inv">Themes and topics</span></h4>
                            <ul class="list-unstyled colcount-sm-2 colcount-md-3">
                                <li><a href="/en/services/jobs.html">Jobs</a></li>
                                <li><a href="/en/services/immigration-citizenship.html">Immigration and citizenship</a></li>
                                <li><a href="https://travel.gc.ca/">Travel and tourism</a></li>
                                <li><a href="/en/services/business.html">Business</a></li>
                                <li><a href="/en/services/benefits.html">Benefits</a></li>
                                <li><a href="/en/services/health.html">Health</a></li>
                                <li><a href="/en/services/taxes.html">Taxes</a></li>
                                <li><a href="/en/services/environment.html">Environment and natural resources</a></li>
                                <li><a href="/en/services/defence.html">National security and defence</a></li>
                                <li><a href="/en/services/culture.html">Culture, history and sport</a></li>
                                <li><a href="/en/services/policing.html">Policing, justice and emergencies</a></li>
                                <li><a href="/en/services/transport.html">Transport and infrastructure</a></li>
                                <li><a href="https://international.gc.ca/world-monde/index.aspx?lang=eng">Canada and the world</a></li>
                                <li><a href="/en/services/finance.html">Money and finance</a></li>
                                <li><a href="/en/services/science.html">Science and innovation</a></li>
                                <li><a href="/en/services/indigenous-peoples.html">Indigenous peoples</a></li>
                                <li><a href="/en/services/veterans-military.html">Veterans and military</a></li>
                                <li><a href="/en/services/youth.html">Youth</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="gc-sub-footer">
                    <div class="container d-flex align-items-center">
                        <nav>
                            <h3 class="wb-inv">Government of Canada Corporate</h3>
                            <ul>
                                <li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
                                <li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
                                <li><a href="https://www.canada.ca/en/government/about.html">About Canada.ca</a></li>
                                <li><a href="/en/transparency/terms.html">Terms and conditions</a></li>
                                <li><a href="/en/revenue-agency/corporate/privacy-notice.html">Privacy</a></li>
                            </ul>
                        </nav>
                        <div class="wtrmrk align-self-end">
                            <img src="https://www.canada.ca/etc/designs/canada/wet-boew/assets/wmms-blk.svg" alt="Symbol of the Government of Canada">
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

<!--
    <script>
        _satellite.pageBottom();
    </script>
-->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/ep-pp.min.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/wet-boew.min.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/theme.min.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/m%C3%A9li-m%C3%A9lo/2023-10-mount-revelstoke.min.js"></script>
    <script src="data/income_rates.js"></script>
    <script>
        "use strict";

        const maxContribution = 40000, 
            yearlyMaxContribution = 8000, 
            priorYearMax = 14, 
            fhsaStartYear = 2023;

        let currentYear, 
            paymentformId = "#fhsa_downpay_form", 
            savingsformId = "#fhsa_taxsavings_form", 
            pagelang = document.documentElement.lang, 
            currencyFormatter = new Intl.NumberFormat(pagelang + "-CA", {
                style: "currency", 
                currency: "CAD", 
                minimumFractionDigits: 0, 
                maximumFractionDigits: 0, 
                roundingPriority: "auto", 
                roundingMode: "trunc"
            }), 
            /*
            percentFormatter = new Intl.NumberFormat(pagelang + "-CA", {
              style: "percent", 
              minimumFractionDigits: 0, 
              maximumFractionDigits: 2, 
              roundingPriority: "auto", 
              roundingMode: "trunc"
            }), 
            */
            hasPriorPaymentFHSA = function () {
                return $(":input[type=radio][name=hasPriorPaymentFHSA]:checked", paymentformId).data("priorpayment-fhsa") || false;
            }, 
            hasSamePriorPaymentInfo = function () {
/*
                if (hasPriorPaymentFHSA() === true) {
                    return $(":input[type=checkbox][name=priorPaymentSameInfo]:checked", paymentformId).data("same-prior") || false;
                }
*/
                return false;
            },
            priorPaymentYears = function () {
                if (hasPriorPaymentFHSA() === true) {
                    return parseInt($("#priorPaymentYearsFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            priorPaymentBalance = function () {
                if (hasPriorPaymentFHSA() === true) {
                    return parseInt($("#priorPaymentBalance").val(), 10) || 0;
                }
                return 0;
            }, 
            priorPaymentAmount = function () {
                if (hasPriorPaymentFHSA() === true) {
                    return parseInt($("#priorPaymentAmountFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            paymentYears = function () {
                return parseInt($("#paymentYears").val(), 10) || 1;
            }, 
            paymentAmount = function () {
                return parseInt($("#paymentAmount").val(), 10) || 0;
            }, 
            paymentInterest = function () {
                return parseFloat($("#paymentInterest").val(), 10) / 100 || 0;
            }, 
            hasPriorSavingsFHSA = function () {
                return $(":input[type=radio][name=hasPriorSavingFHSA]:checked", savingsformId).data("priorsaving-fhsa") || false;
            }, 
            hasSamePriorSavingsInfo = function () {
/*
                if (hasPriorSavingsFHSA() === true) {
                    return $(":input[type=checkbox][name=priorSavingsSameInfo]:checked", savingsformId).data("same-prior") || false;
                }
*/
                return false;
            }, 
            priorSavingYears = function () {
                if (hasPriorSavingsFHSA() === true) {
                    return parseInt($("#priorSavingYearsFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            priorSavingBalance = function () {
                if (hasPriorSavingsFHSA() === true) {
                    return parseInt($("#priorSavingBalance").val(), 10) || 0;
                }
                return 0;
            }, 
            priorSavingAmount = function () {
                if (hasPriorSavingsFHSA() === true) {
                    return parseInt($("#priorSavingAmountFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            province = function () {
                return $("#province").find(":selected") || null;
            }, 
            yearlyIncome = function () {
                return parseInt($("#approxYearlyIncome").val(), 10) || 0;
            }, 
            savingYears = function () {
                return parseInt($("#savingYears").val(), 10) || 1;
            }, 
            savingsAmount = function () {
                return parseInt($("#savingsAmount").val(), 10) || 0;
            }, 
            savingsDirectAmount = function () {
                return parseInt($("#savingsDirectAmount").val(), 10) || 0;
            }, 
            hasSavingInvestGrowth = function () {
                return $(":input[type=radio][name=hasSavingInvestment]:checked", savingsformId).data("hassavinginvestment") || false;
            }, 
            savingInterest = function () {
                if (hasSavingInvestGrowth() === true) {
                    return parseFloat($("#savingInterest").val(), 10) / 100 || 0;
                }
                return 0;
            }, 
            updatePriorPaymentYears = function () {
                if (priorSavingYears() !== 0 && priorSavingYears() !== priorPaymentYears()) {
                    $("#priorPaymentYearsFHSA").val($("#priorSavingYearsFHSA").val());
                }
            }, 
            updatePriorPaymentBalance = function () {
                if (priorSavingBalance() !== 0 && priorSavingBalance() !== priorPaymentBalance()) {
                    $("#priorPaymentBalance").val($("#priorSavingBalance").val());
                }
            }, 
            updatePriorPaymentAmount = function () {
                if (priorSavingAmount() !== 0 && priorSavingAmount() !== priorPaymentAmount()) {
                    $("#priorPaymentAmountFHSA").val($("#priorSavingAmountFHSA").val());
                }
            }, 
            updatePriorSavingYears = function () {
                if (priorPaymentYears() !== 0 && priorPaymentYears() !== priorSavingYears()) {
                    $("#priorSavingYearsFHSA").val($("#priorPaymentYearsFHSA").val());
                }
            }, 
            updatePriorSavingBalance = function () {
                if (priorPaymentBalance() !== 0 && priorPaymentBalance() !== priorSavingBalance()) {
                    $("#priorSavingBalance").val($("#priorPaymentBalance").val());
                }
            }, 
            updatePriorSavingAmount = function () {
                if (priorPaymentAmount() !== 0 && priorPaymentAmount() !== priorSavingAmount()) {
                    $("#priorSavingAmountFHSA").val($("#priorPaymentAmountFHSA").val());
                }
            }, 
            initForms = function (fhsaStartYear, currentYear, priorYearMax, yearlyMaxContribution, maxContribution, paymentformId, savingsformId) {
                let adjustedPriorContributeMax;

                if (currentYear - fhsaStartYear <= priorYearMax && currentYear - fhsaStartYear * yearlyMaxContribution < maxContribution) {
                    adjustedPriorContributeMax = (currentYear - fhsaStartYear) * yearlyMaxContribution;
                } else {
                    adjustedPriorContributeMax = maxContribution;
                }
                updatePriorYearMax("#priorPaymentYearsFHSA", currentYear, fhsaStartYear, priorYearMax, paymentformId);
                $("#priorPaymentAmountFHSA").attr("max", adjustedPriorContributeMax);
                updatePriorYearMax("#priorSavingYearsFHSA", currentYear, fhsaStartYear, priorYearMax, savingsformId);
                $("#priorSavingAmountFHSA").attr("max", adjustedPriorContributeMax);
            }, 
            getCurrentYear = function (startYear) {
                let tempYear, xmlHttp;

                function srvTime() {
                    try {
                        //FF, Opera, Safari, Chrome
                        xmlHttp = new XMLHttpRequest();
                    }
                    catch (err1) {
                        //IE
                        try {
                            xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
                        }
                        catch (err2) {
                            try {
                                xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                            }
                            catch (eerr3) {
                                return new Date().getFullYear();
                            }
                        }
                    }
                    xmlHttp.open("HEAD", window.location.href.toString(), false);
                    xmlHttp.setRequestHeader("Content-Type", "text/html");
                    xmlHttp.send("");
                    return new Date(xmlHttp.getResponseHeader("Date")).getFullYear();
                }
                return srvTime();
            }, 
            generateHoldingsTableData = function (holdingYears, paymentAmount, investment, hasPriorPay, priorPaymentYrs, priorPayAmount, priorPayInvest, priorYearMax, maxContribution) {
                let yearIncrement, 
                    loopYears = priorPaymentYrs + holdingYears, 
                    amountCompound = 0, 
                    investmentCompound = 0, 
                    maxContributeYear = loopYears, 
                    createHoldingsTableBody = function (evalYear, isPriorYear, amountCompound, investmentCompound) {
                        let holdingCell, 
                            holdingRow = document.createElement("tr"), 
                            holdingHeader = document.createElement("th");

                        if (isPriorYear === true && evalYear > 1) {
                            holdingHeader.textContent = $("#holdingsResultsBody").data("prior-payment-year-rows") + evalYear;
                        } else {
                            holdingHeader.textContent = evalYear;
                        }
                        holdingRow.appendChild(holdingHeader);
                        holdingCell = document.createElement("td");
                        holdingCell.setAttribute("data-wb-charts-value", amountCompound + "$");
                        holdingCell.textContent = currencyFormatter.format(amountCompound);
                        holdingRow.appendChild(holdingCell);
                        holdingCell = document.createElement("td");
                        holdingCell.textContent = currencyFormatter.format(investmentCompound);
                        holdingRow.appendChild(holdingCell);
                        holdingCell = document.createElement("td");
                        holdingCell.setAttribute("data-wb-charts-value", amountCompound + investmentCompound + "$");
                        holdingCell.textContent = currencyFormatter.format(amountCompound + investmentCompound);
                        holdingRow.appendChild(holdingCell);
                        document.getElementById("holdingsResultsBody").appendChild(holdingRow);
                    };

                $("#holdingsResultsBody").html("");
                if (hasPriorPay === true) {
                    amountCompound = priorPayAmount;
                    investmentCompound = priorPayInvest;
                    createHoldingsTableBody(priorPaymentYrs, true, amountCompound, investmentCompound);
                }

                if (amountCompound < maxContribution) {
                    if (loopYears >= priorYearMax + 1) {
                        loopYears = priorYearMax + 1;
                        maxContributeYear = loopYears;
                    }
                    for (yearIncrement = priorPaymentYrs + 1; yearIncrement <= loopYears; yearIncrement = yearIncrement + 1) {
                        if (amountCompound + paymentAmount < maxContribution) {
                            amountCompound = amountCompound + paymentAmount;
                        } else {
                            if (amountCompound !== maxContribution) {
                                maxContributeYear = yearIncrement;
                            }
                            amountCompound = maxContribution;
                        }
                        investmentCompound = investmentCompound + (investmentCompound + amountCompound) * investment;
                        createHoldingsTableBody(yearIncrement, false, amountCompound, investmentCompound);
                    }
                    return {
                        "addedAmount": amountCompound, 
                        "investment": investmentCompound, 
                        "maxContributeYear": maxContributeYear, 
                        "yearsheld": loopYears
                    };
                }
            }, 
            generateSavingsTableData = function (area, federalName, abatementID, income, savingYears, savingsAmount, savingsDirectAmount, hasInvestGrowth, investment, hasPriorSavings, priorSavingYears, priorSavingAmount, priorSavingsInvest, priorYearMax, maxContribution, startYear, currentYear, incomeRates, pagelang) {
                let yearIncrement, federalRates, fedSavingsAmt, provinceRates, areaSavingsAmt, juristictionArr, abatement, savingsRow, 
                    loopYears = priorSavingYears + savingYears, 
                    amountCompound = 0, 
                    investmentAmount = 0, 
                    investmentCompound = 0, 
                    deductContribAmt = 0, 
                    deductCumulative = 0, 
                    fedMinCumulative = 0, 
                    fedMaxCumulative = 0, 
                    areaMinCumulative = 0, 
                    areaMaxCumulative = 0, 
                    maxContributeYear = loopYears, 
                    hasInvestment = hasInvestGrowth === true || priorSavingsInvest > 0, 
                    createSavingsTableBody = function (savingsRow, evalYear, amountCompound, investmentCompound, deductContribAmt, fedMinVal, fedMaxVal, areaMinVal, areaMaxVal, hasInvestment, isPriorYear, isTotal) {
                        let savingsCell, 
                            savingsHeader = document.createElement("th"), 
                            cellContentEval = function (savingsCell, cellContent, naCondCheck) {
                                let noInvestText;

                                if (naCondCheck) {
                                    if ("content" in document.createElement("template")) {
                                        noInvestText = document.getElementById("noInvestText").content.cloneNode(true);
                                    }
                                    savingsCell.appendChild(noInvestText);
                                } else {
                                    savingsCell.textContent = cellContent;
                                }
                                return savingsCell;
                            }, 
                            getRateCalcRange = function (minVal, maxVal) {
                                if (parseInt(maxVal, 10) === 0) {
                                    return currencyFormatter.format(maxVal);
                                } else if (parseInt(minVal, 10) === parseInt(maxVal, 10)) {
                                    return $("#savingsResultsBody").data("savings-text") + currencyFormatter.format(maxVal);
                                }
                                return currencyFormatter.format(minVal) + $("#savingsResultsBody").data("savings-range-text") + currencyFormatter.format(maxVal);
                            };

                        if (isPriorYear === true && evalYear > 1) {
                            savingsHeader.textContent = $("#savingsResultsBody").data("prior-savings-year-rows") + evalYear;
                        } else {
                            savingsHeader.textContent = evalYear;
                        }
                        savingsRow.appendChild(savingsHeader);
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, currencyFormatter.format(amountCompound), isTotal === true));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, currencyFormatter.format(deductContribAmt), isPriorYear === true));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, currencyFormatter.format(investmentCompound), hasInvestment === false));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, getRateCalcRange(areaMinVal, areaMaxVal), isPriorYear === true));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, getRateCalcRange(fedMinVal, fedMaxVal), isPriorYear === true));
                        document.getElementById("savingsResultsBody").appendChild(savingsRow);
                    }, 
                    getRefundAmount = function (income, investmentAmount, deductContribAmt, tax, abatement) {
                        let rateLoop, lastRate, 
                            maxlimit = 0, 
                            currentIncome = income;

                        if (Object.prototype.hasOwnProperty.call(tax, "rates") === true) {
                            for (rateLoop = tax.rates.length - 1; rateLoop >= 0; rateLoop = rateLoop - 1) {
                                if (tax.rates[rateLoop].threshold < currentIncome && tax.rates[rateLoop].threshold <= Math.max(0, currentIncome - deductContribAmt)) {
                                    maxlimit = (deductContribAmt + investmentAmount) * tax.rates[rateLoop].rate * abatement;
                                    break;
                                } else if (tax.rates[rateLoop].threshold < currentIncome - deductContribAmt) {
                                    maxlimit = (tax.rates[rateLoop].threshold) * tax.rates[rateLoop].rate + (currentIncome - tax.rates[rateLoop].threshold) * lastRate * abatement;
                                    break;
                                }
                                lastRate = tax.rates[rateLoop].rate;
                            }
                            return {
                                "min": (deductContribAmt + investmentAmount) * tax.rates[0].rate * abatement, 
                                "max": maxlimit
                            }
                        }
                        return {};
                    }, 
                    getRatesArr = function(area, ratesArr, pagelang) {
                        if (typeof incomeRates !== "undefined" && incomeRates.length > 0) {
                            return ratesArr.find(function findLoc(rateLocs) {
                                return rateLocs[pagelang] === area;
                            }, pagelang, area);
                        }
                        return {};
                    }, 
                    areaRates = function (juristictionArr, rateYear, startYear) {
                        let evalYear, yearRateArrLen;

                        for (yearRateArrLen = juristictionArr.timeframe.length - 1; yearRateArrLen >= 0; yearRateArrLen = yearRateArrLen - 1) {
                            for (evalYear = rateYear; evalYear >= startYear; evalYear = evalYear - 1) {
                                if (juristictionArr.timeframe[yearRateArrLen].year === evalYear) {
                                    return juristictionArr.timeframe[yearRateArrLen];
                                }
                            }
                        }
                        return {};
                    }, 
                    getAbatement = function(juristictionArr, abatementId) {
                        var abate;

                        if (abatementId !== "undefined" && Object.prototype.hasOwnProperty.call(juristictionArr, "abatement") === true) {
                            abate = juristictionArr.abatement.find(function findLoc(abateVal) {
                                return Object.keys(abateVal)[0] === abatementId;
                            }, abatementId);
                            if (typeof abate === "object") {
                                return abate[abatementId];
                            }
                        }
                        return 1;
                    };

                juristictionArr = getRatesArr(area, incomeRates, pagelang);
                provinceRates = areaRates(juristictionArr, currentYear, startYear);
                juristictionArr = getRatesArr(federalName, incomeRates, pagelang);
                federalRates = areaRates(juristictionArr, currentYear, startYear);
                abatement = getAbatement(juristictionArr, abatementID);

                $("#savingsResultsBody").html("");
                if (hasPriorSavings === true) {
                    amountCompound = priorSavingAmount;
                    investmentCompound = priorSavingsInvest;
                    savingsRow = document.createElement("tr");
                    createSavingsTableBody(savingsRow, priorSavingYears, amountCompound, investmentCompound, 0, 0, 0, 0, 0, hasInvestment, true, false);
                }
                if (amountCompound < maxContribution) {
                    if (loopYears >= priorYearMax + 1) {
                        loopYears = priorYearMax + 1;
                        maxContributeYear = loopYears;
                    }
                    for (yearIncrement = priorSavingYears + 1; yearIncrement <= loopYears; yearIncrement = yearIncrement + 1) {
                        if (amountCompound + savingsAmount < maxContribution) {
                            deductContribAmt = savingsDirectAmount;
                            amountCompound = amountCompound + savingsAmount;
                        } else {
                            deductContribAmt = (savingsDirectAmount / savingsAmount) * (maxContribution - amountCompound);
                            if (amountCompound !== maxContribution) {
                                maxContributeYear = yearIncrement;
                            }
                            amountCompound = maxContribution;
                        }
                        deductCumulative = deductCumulative + deductContribAmt;
                        investmentAmount = (investmentCompound + amountCompound) * investment;
                        investmentCompound = investmentCompound + investmentAmount;
                        fedSavingsAmt = getRefundAmount(income, investmentAmount, deductContribAmt, federalRates, abatement);
                        areaSavingsAmt = getRefundAmount(income, investmentAmount, deductContribAmt, provinceRates, 1);
                        fedMinCumulative = fedMinCumulative + fedSavingsAmt.min;
                        fedMaxCumulative = fedMaxCumulative + fedSavingsAmt.max;
                        areaMinCumulative = areaMinCumulative + areaSavingsAmt.min;
                        areaMaxCumulative = areaMaxCumulative + areaSavingsAmt.max;
                        savingsRow = document.createElement("tr");
                        createSavingsTableBody(savingsRow, yearIncrement, amountCompound, investmentAmount, deductContribAmt, fedSavingsAmt.min, fedSavingsAmt.max, areaSavingsAmt.min, areaSavingsAmt.max, hasInvestment, false, false);
                    }
                    savingsRow = document.createElement("tr");
                    savingsRow.setAttribute("class", "success text-right");
                    createSavingsTableBody(savingsRow, $("#savingsResultsBody").data("total-header"), 0, investmentCompound, deductCumulative, fedMinCumulative, fedMaxCumulative, areaMinCumulative, areaMaxCumulative, hasInvestment, false, true);
                    return {
                        "addedAmount": amountCompound, 
                        "investment": investmentCompound, 
                        "deductContribute": deductCumulative, 
                        "fedExempt": federalRates.exemption, 
                        "areaExempt": provinceRates.exemption, 
                        "fedAmountMin": fedMinCumulative, 
                        "fedAmountMax": fedMaxCumulative, 
                        "areaAmountMin": areaMinCumulative, 
                        "areaAmountMax": areaMaxCumulative, 
                        "maxContributeYear": maxContributeYear, 
                        "yearssaved": loopYears
                    };
                }
            }, 
            updatePriorYearMax = function (maxYearId, currentYear, fhsaStartYear, priorYearMax, formId) {
                let adjustedPriorYears;

                if (currentYear - fhsaStartYear <= priorYearMax) {
                    adjustedPriorYears = currentYear - fhsaStartYear;
                } else {
                    adjustedPriorYears = priorYearMax;
                }
                $(maxYearId).attr("max", adjustedPriorYears);
                $(maxYearId).data("rule-rangelength", "[1," + adjustedPriorYears + "]");
                $("[data-max-prior-years=true]", formId).html(adjustedPriorYears);
                if (adjustedPriorYears < 2) {
                    $("[data-prior-year-range=true]", formId).addClass("hidden");
                }
            }, 
            updatePaymentResults = function (priorYearMax, maxContribution, paymentformId) {
                let priorPaymentInvestment = priorPaymentBalance() - priorPaymentAmount(), 
                    paymentTotals = generateHoldingsTableData(paymentYears(), paymentAmount(), paymentInterest(), hasPriorPaymentFHSA(), priorPaymentYears(), priorPaymentAmount(), priorPaymentInvestment, priorYearMax, maxContribution);

                $("[data-output=holdings-total]", paymentformId).html(currencyFormatter.format(paymentTotals.addedAmount + paymentTotals.investment));
                if (priorPaymentInvestment + paymentTotals.investment > 0) {
                    $("#paymentGrowthResult", paymentformId).removeClass("hidden");
                    $("[data-output=investment-growth-total]", paymentformId).html(currencyFormatter.format(paymentTotals.investment));
                } else {
                    $("#paymentGrowthResult", paymentformId).addClass("hidden");
                }
                $("#paymentThresholdYear", paymentformId).html(paymentTotals.maxContributeYear);
                $("#paymentContributeTotal", paymentformId).html(currencyFormatter.format(paymentTotals.addedAmount));
                if (paymentTotals.addedAmount === maxContribution) {
                    $("#paymentThresholdData", paymentformId).removeClass("hidden");
                } else {
                    $("#paymentThresholdData", paymentformId).addClass("hidden");
                }
                if (paymentTotals.yearsheld === 1) {
                    $("[data-payment-year-range=true]", paymentformId).addClass("hidden");
                } else {
                    $("[data-payment-year-range=true]", paymentformId).removeClass("hidden");
                }
                $("[data-output=payment-years]", paymentformId).html(paymentTotals.yearsheld);
            }, 
            updateSavingResults = function (incomeRates, currentYear, fhsaStartYear, priorYearMax, maxContribution, pagelang, savingsformId) {
                let fedTotal, areaTotal, 
                    prov = province(), 
                    priorSavingsInvestment = priorSavingBalance() - priorSavingAmount(), 
                    savingsTotals = generateSavingsTableData(prov.val(), $("#province").data("fed"), prov.data("id"), yearlyIncome(), savingYears(), savingsAmount(), savingsDirectAmount(), hasSavingInvestGrowth(), savingInterest(), hasPriorSavingsFHSA(), priorSavingYears(), priorSavingAmount(), priorSavingsInvestment, priorYearMax, maxContribution, fhsaStartYear, currentYear, incomeRates, pagelang);

                if (savingsTotals.yearssaved === 1) {
                    $("[data-savings-year-range=true]", savingsformId).addClass("hidden");
                } else {
                    $("[data-savings-year-range=true]", savingsformId).removeClass("hidden");
                }
                $("[data-output=saving-years]", savingsformId).html(savingsTotals.yearssaved);
                $("[data-area-name=provincial-territorial]", savingsformId).html(prov.val());
                if (parseInt(savingsTotals.fedAmountMin, 10) === parseInt(savingsTotals.fedAmountMax, 10)) {
                    fedTotal = $("#savingsResultsBody").data("savings-text") + "<strong>" + currencyFormatter.format(savingsTotals.fedAmountMax) + "</strong>";
                } else {
                    fedTotal = "<strong>" + currencyFormatter.format(savingsTotals.fedAmountMin) + "</strong>" + $("#savingsResultsBody").data("savings-range-text") + "<strong>" + currencyFormatter.format(savingsTotals.fedAmountMax) + "</strong>";
                }
                if (parseInt(savingsTotals.areaAmountMin, 10) === parseInt(savingsTotals.areaAmountMax, 10)) {
                    areaTotal = $("#savingsResultsBody").data("savings-text") + "<strong>" + currencyFormatter.format(savingsTotals.areaAmountMax) + "</strong>"
                } else {
                    areaTotal = "<strong>" + currencyFormatter.format(savingsTotals.areaAmountMin) + "</strong>" + $("#savingsResultsBody").data("savings-range-text") + "<strong>" + currencyFormatter.format(savingsTotals.areaAmountMax) + "</strong>"
                }
                if (yearlyIncome() <= savingsTotals.areaExempt && yearlyIncome() <= savingsTotals.fedExempt) {
                    $("[data-min-threshold=false]").removeClass("hidden");
                    $("[data-min-threshold=true]").addClass("hidden");
                } else {
                    $("[data-min-threshold=false]").addClass("hidden");
                    $("[data-min-threshold=true]").removeClass("hidden");
                }
                $("[data-output=fed-tax]", savingsformId).html(fedTotal);
                $("[data-output=area-tax]", savingsformId).html(areaTotal);
                $("#savingsThresholdYear", savingsformId).html(savingsTotals.maxContributeYear);
                $("#savingsContributeTotal", savingsformId).html(currencyFormatter.format(savingsTotals.addedAmount));
                if (savingsTotals.deductContribute === 0 && savingsTotals.investment === 0) {
                    $("[data-zero-val=true]").removeClass("hidden");
                    $("[data-min-threshold=true]").addClass("hidden");
                } else {
                    $("[data-zero-val=true]").addClass("hidden");
                    $("[data-min-threshold=true]").removeClass("hidden");
                }
                if (savingsTotals.addedAmount === maxContribution) {
                    $("#savingsThresholdData", savingsformId).removeClass("hidden");
                } else {
                    $("#savingsThresholdData", savingsformId).addClass("hidden");
                }
            };


        currentYear = getCurrentYear(fhsaStartYear);
        if (currentYear > fhsaStartYear + 1) {
             $("[data-single-year-range=true]").addClass("hidden");
        } else {
            $("[data-single-year-range=true]").removeClass("hidden");
        }
        if (currentYear <= fhsaStartYear) {
            currentYear = fhsaStartYear + 1;
            $("[data-first-year-date=true]").html(fhsaStartYear);
            $("[data-first-year=true]").removeClass("hidden");
            $("[data-first-year=false]").addClass("hidden");
            $("[data-prior-year=true]").html(fhsaStartYear);
        } else {
            $("[data-first-year=true]").addClass("hidden");
            $("[data-first-year=false]").removeClass("hidden");
            $("[data-prior-year=true]").html(currentYear - 1);
        }
        initForms(fhsaStartYear, currentYear, priorYearMax, yearlyMaxContribution, maxContribution, paymentformId, savingsformId);


        $(paymentformId).on("click vclick touchstart", "input[type=radio][name=hasPriorPaymentFHSA]", function () {
            if (hasPriorPaymentFHSA() === true) {
                $("#priorPaymentFHSAfields").removeClass("hidden");
                $("#priorPaymentYearsFHSA").attr("required", "required");
                $("#priorPaymentBalance").attr("required", "required");
                $("#priorPaymentAmountFHSA").attr("required", "required");
                    updatePriorPaymentYears();
                    updatePriorPaymentBalance();
                    updatePriorPaymentAmount();
            } else {
                $("#priorPaymentFHSAfields").addClass("hidden");
                $("#priorPaymentYearsFHSA").removeAttr("required");
                $("#priorPaymentBalance").removeAttr("required");
                $("#priorPaymentAmountFHSA").removeAttr("required");
            }
        });

/*
        $(paymentformId).on("click vclick touchstart", "input[type=checkbox][name=priorPaymentSameInfo]", function () {
            if (hasSamePriorPaymentInfo() === true) {
                updatePriorPaymentYears();
                updatePriorPaymentBalance();
                updatePriorPaymentAmount();
            }
        });
*/

        $(paymentformId).on("change", "#priorPaymentYearsFHSA", function () {
            if (hasSamePriorSavingsInfo() === true || priorSavingYears() === 0) {
                updatePriorSavingYears();
            }
        });

        $(paymentformId).on("change", "#priorPaymentBalance", function () {
            if (hasSamePriorSavingsInfo() === true || priorSavingBalance() === 0) {
                updatePriorSavingBalance();
            }
           if (this.value === 0) {
              $("#priorPaymentAmountFHSA").attr("min", 0);
           } else {
              $("#priorPaymentAmountFHSA").attr("min", 1);
           }
        });

        $(paymentformId).on("change", "#priorPaymentAmountFHSA", function () {
            if (hasSamePriorSavingsInfo() === true || priorSavingAmount() === 0) {
                updatePriorSavingAmount();
            }
        });

        $(paymentformId).on("click vclick touchstart", "#paymentresultsbtn", function (event) {
            event.preventDefault();
            var isFormValid = true, 
                parentElement = this.parentElement, 
                parentPreviousClassList = parentElement.previousElementSibling.classList;

            if (jQuery.validator && jQuery.validator !== "undefined") {
                isFormValid = $(paymentformId).valid();
            }

            if (isFormValid === true) {
                if ($("#holdingsResults").hasClass("hidden") === true) {
                    $("#paymentresultsbtn").removeClass("btn-primary");
                    $("#paymentresultsbtn").addClass("btn-default");
                    $("#paymentresultsbtn").html($("#paymentresultsbtn").data("btn-activated"));
                    $("#holdingsResults").removeClass("hidden");
                }
                parentPreviousClassList.remove("wb-steps-error");
                updatePaymentResults(priorYearMax, maxContribution, paymentformId);
                /*
                $("#holdingsresultstable").addClass("wb-charts wb-charts-area");
                $("#holdingsresultstable").trigger("wb-init.wb-charts");
                */
            }

        });

        $(savingsformId).on("click vclick touchstart", "input[type=radio][name=hasPriorSavingFHSA]", function () {
            if (hasPriorSavingsFHSA() === true) {
                $("#priorSavingFHSAfields").removeClass("hidden");
                $("#priorSavingYearsFHSA").attr("required", "required");
                $("#priorSavingBalance").attr("required", "required");
                $("#priorSavingAmountFHSA").attr("required", "required");
                $("[data-show-prior=true]").removeClass("hidden");
                    updatePriorSavingYears();
                    updatePriorSavingBalance();
                    updatePriorSavingAmount();
            } else {
                $("#priorSavingFHSAfields").addClass("hidden");
                $("#priorSavingYearsFHSA").removeAttr("required");
                $("#priorSavingBalance").removeAttr("required");
                $("#priorSavingAmountFHSA").removeAttr("required");
                $("[data-show-prior=true]").addClass("hidden");
            }
        });

/*
        $(savingsformId).on("click vclick touchstart", "input[type=checkbox][name=priorSavingsSameInfo]", function () {
            if (hasSamePriorSavingsInfo() === true) {
                updatePriorSavingYears();
                updatePriorSavingBalance();
                updatePriorSavingAmount();
            }
        });
*/

        $(savingsformId).on("change", "#priorSavingYearsFHSA", function () {
            if (hasSamePriorPaymentInfo() === true || priorPaymentYears() === 0) {
                updatePriorPaymentYears();
            }
        });

        $(savingsformId).on("change", "#priorSavingBalance", function () {
            if (hasSamePriorPaymentInfo() === true || priorPaymentBalance() === 0) {
                updatePriorPaymentBalance();
            }
           if (this.value === 0) {
              $("#priorSavingAmountFHSA").attr("min", 0);
           } else {
              $("#priorSavingAmountFHSA").attr("min", 1);
           }
        });

        $(savingsformId).on("change", "#priorSavingAmountFHSA", function () {
            if (hasSamePriorPaymentInfo() === true || priorPaymentAmount() === 0) {
                updatePriorPaymentAmount();
            }
        });

        $(savingsformId).on("click vclick touchstart", "input[type=radio][name=hasSavingInvestment]", function () {
            if (hasSavingInvestGrowth() === true) {
                $("#savingInvestPercentGroup").removeClass("hidden");
                $("#savingInterest").attr("required", "required");
            } else {
                $("#savingInvestPercentGroup").addClass("hidden");
                $("#savingInterest").removeAttr("required");
            }
        });

        $(savingsformId).on("click vclick touchstart", "#savingsresultsbtn", function (event) {
            event.preventDefault();
            var isFormValid = true, 
                parentElement = this.parentElement, 
                parentPreviousClassList = parentElement.previousElementSibling.classList;

            if (jQuery.validator && jQuery.validator !== "undefined") {
                isFormValid = $(savingsformId).valid();
            }

            if (isFormValid === true) {
                if ($("#savingsResults").hasClass("hidden") === true) {
                    $("#savingsresultsbtn").removeClass("btn-primary");
                    $("#savingsresultsbtn").addClass("btn-default");
                    $("#savingsresultsbtn").html($("#savingsresultsbtn").data("btn-activated"));
                    $("#savingsResults").removeClass("hidden");
                }
                parentPreviousClassList.remove("wb-steps-error");
                updateSavingResults(incomeRates, currentYear, fhsaStartYear, priorYearMax, maxContribution, pagelang, savingsformId);
            }
        });

        $(savingsformId).on("change input", "#savingsAmount", function () {
            if (parseInt(document.getElementById("savingsAmount").value, 10) < parseInt(document.getElementById("savingsDirectAmount").value, 10)) {
                document.getElementById("savingsDirectAmount").value = document.getElementById("savingsAmount").value;
            }
        });

        $(savingsformId).on("change input", "#savingsDirectAmount", function (event) {
            event.stopPropagation();
            if (parseInt(document.getElementById("savingsDirectAmount").value, 10) > parseInt(document.getElementById("savingsAmount").value, 10)) {
                document.getElementById("savingsDirectAmount").value = document.getElementById("savingsAmount").value;
                event.preventDefault();
                return false;
            }
        });
    </script>
    <script src="script/wb-input-range.js"></script>
    <script>
        $(document).on("click", ".steps-wrapper div.buttons > :button", function (event) {
            let $form = $(this).parents("form:first");
            $form.find("legend.wb-steps-active").parents().prevAll().find("legend.panel-heading").addClass("prev-wb-step");
            $form.find("legend.wb-steps-active").parents().nextAll().find("legend.panel-heading").removeClass("prev-wb-step");
            $form.find("legend.wb-steps-active").removeClass("prev-wb-step").attr("tabindex", "0");
            $form.find("legend:not(.wb-steps-active)").attr("tabindex", "-1");
            //wrap with button
            $form.find("legend.wb-steps-active").parents().prevAll().find("legend.panel-heading").wrapInner("<button class=\"btn-link p-0 btn-lgnd\" type=\"button\"></button>");
            $form.find("fieldset legend.wb-steps-active").nextAll().addBack().find(".btn-lgnd").contents().unwrap();
            $form.find(".btn-lgnd .btn-lgnd").contents().unwrap();
        });
        $(document).on("click", ".prev-wb-step", function (event) {
            let $form = $(this).parents("form:first");
            $form.find(".wb-steps-active, legend.prev-wb-step").removeClass("wb-steps-active prev-wb-step");
            $form.find("legend + div.panel-body, .buttons").addClass("hidden");
            $form.find("legend.wb-steps-active").parents().nextAll().each(function (index) {});
            $(this).addClass("wb-steps-active").removeClass("prev-wb-step");
            $(this).parent().parent().find("legend + div.panel-body.hidden, .buttons").removeClass("hidden");
        });
    </script>
</body>
</html>
