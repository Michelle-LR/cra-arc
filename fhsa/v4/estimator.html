<!DOCTYPE html>
<!--[if lt IE 9]>
<html class="no-js lt-ie9" lang="en" dir="ltr">
   <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW) wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <title>Estimator - First Home Savings Account (FHSA) - Canada.ca</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta name="robots" content="noindex, follow">
    <!-- Meta data -->
    <!-- Meta data-->
    <!-- Load closure template scripts -->
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_43/cdts/compiled/soyutils.js"></script>
    <script type="text/javascript" src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_0_43/cdts/compiled/wet-en.js"></script>
    <link href="https://test.canada.ca/covid-19-guidance/proto/css/alpha-beta-banner.css" rel="stylesheet">
    <link href="https://www.canada.ca/etc/designs/canada/wet-boew/m%C3%A9li-m%C3%A9lo/2023-10-mount-revelstoke.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
    <style type="text/css">
        div.hidden-action {
            transform: scaleX(0);
            overflow: hidden;
            display: none;
        }

        div.visible-action {
            transform: scaleX(1);
            display: visible;
        }

        /*Checkbox/Fieldflow radio input sizing,positioning*/
        .checkbox-zebra>li:nth-child(2n+1) {
            background-color: #f5f5f5;
            margin-left: -50px;
            padding-top: 10px;
            padding-bottom: 15px;
            padding-left: 50px;
        }

        .checkbox-zebra [role="checkbox"]::before {
            background-color: #fff;
        }

        .std-blt {
            font-size: 20px;
            line-height: 1.65em;
        }

        .std-blt {
            list-style-type: disc;
        }

        .std-blt li label {
            display: block;
            padding-left: 0px;
        }

        /********
         ********
         ** New checklist example
         ** May 15, 2020
         ** Replacing checkkboxes with clickable divs that convey a sense of success to the user
         ********
         ********/
        /* One input per line */
        .provisional [role="checkbox"] {
            /* (0,2,0) */
            cursor: pointer;
            display: inline-block;
            padding-left: 15px;
            position: relative;
        }

        .provisional [role="checkbox"]::before, 
        .provisional [role="checkbox"]::after {
            /* (0,2,1) */
            content: "";
            left: 0;
            position: absolute;
            top: 0;
            transform: translate(-100%, 0%);
        }

        .provisional .wb-checklist.wb-checklist-sm {
            /* (0,3,0) */
            font-size: 17px;
        }

        /* the basic, unchecked style */
        .provisional [role="checkbox"]::before {
            /* (0,2,1) */
            border: 4px solid #fff;
            box-shadow: 0 0 0 2px #000;
            display: inline-block;
            height: 36px;
            width: 36px;
        }

        .provisional .wb-checklist-sm [role="checkbox"]::before {
            /* (0,3,1) */
            border-width: 3px;
            height: 24px;
            transform: translate(-100%, 20%);
            width: 24px;
        }

        /* hover styling */
        .provisional [role="checkbox"][aria-checked="false"]:hover::before {
            /* (0,3,1) */
            background-image: linear-gradient(to bottom, hsl(10, 0%, 90%), hsl(10, 0%, 100%) 50%);
        }

        /* focus styling */
        .provisional [role="checkbox"]:focus {
            /* (0,3,0) */
            outline: none;
        }

        .provisional [role="checkbox"]:focus::before {
            /* (0,3,2) */
            box-shadow: 0 0 0 2px #000, 0 0 8px 4px rgb(59, 153, 252);
        }

        /* the checked style using the [aria-checked='true'] pseudo class and aria-checked=true attribute */
        .provisional [role="checkbox"][aria-checked="true"]::before {
            /* (0,3,1) */
            background-color: #318000;
            border: none;
        }

        .provisional [role="checkbox"][aria-checked="true"]::after {
            /* (0,3,1) */
            border-color: white;
            border-style: solid;
            border-width: 0 5px 5px 0;
            display: inline-block;
            height: 26px;
            width: 13px;
            transform: translate(-185%, 10%) rotate(45deg);
        }

        .provisional .wb-checklist-sm [role="checkbox"][aria-checked="true"]::after {
            /* (0,3,1) */
            border-width: 0 4px 4px 0;
            height: 16px;
            width: 9px;
            transform: translate(-185%, 40%) rotate(45deg);
        }

        @charset "utf-8";

        /*Fix checkboxes in zebra list*/
        .gc-chckbxrdio>li>input[type=checkbox]+label::before {
            margin-left: -20px;
            margin-top: 10px;
        }

        .gc-chckbxrdio>li>input[type=checkbox]+label::after {
            margin-left: -20px;
            margin-top: 10px;
        }

        .gc-chckbxrdio>li:nth-child(2n+1)>input[type=checkbox]+label::before {
            margin-left: 30px;
            margin-top: 20px;
            background-color: #fff;
        }

        .gc-chckbxrdio>li:nth-child(2n+1)>input[type=checkbox]+label::after {
            margin-left: 30px;
            margin-top: 20px;
        }

        /*fix OR pattern in checklists*/
        [class*=cnjnctn-type-] {
            display: flex;
            flex-wrap: nowrap;
            flex-direction: column;
            margin-bottom: 15px;
            margin-left: -15px; /*was 5*/
            margin-right: 0px;
            margin-top: 0px; /*was 15*/
            position: relative;
            min-height: 60px;
        }

        /*css to remove OR line for specific pages in dental/housing*/
        [class*=cnjnctn-type-] [class*=cnjnctn-col]:not(:first-child):after {
            background-image: none !important;
        }
    </style>
    <style>
        .wb-input-range>datalist {
            justify-content: space-between;
        }

        .wb-input-range>output.wb-input-range-display, div.wb-input-range-display {
            font-size: 20px;
            min-width: 2em;
            text-align: center;
            position: absolute;
            left: 50%;
            padding-left: 6px;
            padding-right: 6px;
            transform: translate(-50%, -2.7em);
            border-radius: 6px;
            background: #e3e3e3;
        }

        output.wb-input-range-display {
            padding-top: 0px;
        }
    </style>


    <!-- Write closure template -->
    <script type="text/javascript">
        document.write(wet.builder.refTop({}));
    </script>
</head>

<body vocab="http://schema.org/" typeof="WebPage" class="experimental">
    <div id="def-top">
    </div>
    <!-- Write closure template -->
    <script type="text/javascript">
        var defTop = document.getElementById("def-top");
        defTop.outerHTML = wet.builder.top({
            lngLinks: [{
                lang: "fr", 
                href: "#", 
                text: "Français"
            }], 
            breadcrumbs: [{
                title: "Canada.ca", 
                href: "https://www.canada.ca/en.html"
            }, {
                title: "Taxes", 
                href: "https://www.canada.ca/en/services/taxes.html"
            }, {
                title: "Savings and pension plans", 
                href: "https://www.canada.ca/en/services/taxes/savings-and-pension-plans.html"
            }, {
                title: "First Home Savings Account (FHSA)", 
                href: "index.html"
            }], 
            search: true, 
            siteMenu: true, 
            showPreContent: true
        });
    </script>
    <main role="main" property="mainContentOfPage" class="container">

        <h1 property="name" id="wb-cont" class="gc-thickline">FHSA estimator</h1>
        <p>You can use this estimator to help you understand how your savings might grow in a First Home Savings Account (FHSA).</p>
        <p><a href="index.html">Learn about the FHSA program</a> before using this tool.</p>
        <p>This tool provides an <strong>estimate</strong> based on your estimated information. It is intended for illustrative and general information purposes. The results generated are examples only.</p>
        <p>Your data is not collected or saved. If you leave or refresh the page, you will need to enter your information again.</p>
        <ul class="list-unstyled">
            <li>
                <details>
                    <summary>Read the privacy statement for the estimator tool</summary>
                    <p>The CRA is not collecting or retaining any of the information you enter on this page. The estimator’s results are rough estimates and are based on the information that you provided. The results should not be considered financial advice. The results that are obtained after using this interactive tool are not binding on the CRA.</p>
                </details>
            </li>
        </ul>
        <div class="row">
            <div class="col-sm-12">
                <h2>Account Holdings estimate</h2>
                <p>Find out how much an individual can save towards their down payment with the First Home Savings Account</p>
            </div>
            <div class="wb-frmvld col-sm-12 provisional wb-steps">
                <form id="fhsa_downpay_form" name="fhsa_cal_form" action="#" method="get" autocomplete="off" class="panel panel-default">
                    <!-- Form 1 STEP 1-->
                    <fieldset id="priorPaymentBalance" class="panel-default p-0">
                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">FHSA prior years additions</span></legend>
                        <div class="panel-body mrgn-lft-sm">

                            <fieldset id="priorPaymentBalance-question" class="mrgn-lft-md gc-chckbxrdio chckbxrdio-grp gc-font-2019 provisional">

                                <legend class="h5 required" tabindex="-1"><span class="gc-font-2019">Did you add to your FHSA in prior years? <strong class="required">(required)</strong></span></legend>

                                <ul class="list-unstyled">
                                    <li class="radio">
                                        <input type="radio" name="hasPriorPaymentFHSA" id="priorpayment-fhsa-true" value="true" data-priorpayment-fhsa="true" data-rule-required="true">
                                        <label for="priorpayment-fhsa-true">Yes</label>
                                    </li>
                                    <li class="radio">
                                        <input type="radio" name="hasPriorPaymentFHSA" id="priorpayment-fhsa-false" value="false" data-priorpayment-fhsa="false" data-rule-required="true">
                                        <label for="priorpayment-fhsa-false">No</label>
                                    </li>
                                </ul>
                            </fieldset>


                            <div id="priorPaymentFHSAfields" class="mrgn-lft-md hidden">
                                <div id="priorPaymentAmountFHSAElm" class="form-group">
                                    <label id="priorPaymentYearsFHSALabel" for="priorPaymentYearsFHSA" class="required"><span class="field-name">Number of prior years you added to your FHSA</span> (<span data-prior-year-range="true">1 to </span><span data-max-prior-years="true">14</span> year<span data-prior-year-range="true">s</span>) <strong id="priorPaymentYearsFHSALabelRequire" class="required">(required)</strong></label>
                                    <div class="input-group col-xs-2 col-sm-1">
                                        <input type="number" name="priorPaymentYearsFHSA" min="1" max="14" value="" id="priorPaymentYearsFHSA" data-rule-minlength="1" data-rule-maxlength="2" class="form-control text-right" data-rule-rangelength="[1,14]">
                                    </div>
                                </div>
                                <div id="priorPaymentYearsFHSAElm" class="form-group">
                                    <label id="priorPaymentAmountFHSALabel" for="priorPaymentAmountFHSA" class="required"><span class="field-name">Your total FHSA additions for prior years</span><span class="wb-inv"> (dollars only, no cents)</span> <strong id="priorPaymentAmountFHSALabelRequire" class="required">(required)</strong></label>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorPaymentAmountFHSA" size="7" maxlength="7" value="" id="priorPaymentAmountFHSA" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" max="40000" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                                <div id="priorPaymentYearsInvestElm" class="form-group">
                                    <label id="priorPaymentYearsInvestLabel" for="priorPaymentYearsInvest" class="required"><span class="field-name">Your FHSA investment income for prior years</span><span class="wb-inv"> (dollars only, no cents)</span> <strong id="priorPaymentYearsInvestRequire" class="required">(required)</strong></label>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorPaymentYearsInvest" size="7" maxlength="7" value="" id="priorPaymentYearsInvest" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>


                    <!-- Form 1 STEP 2-->
                    <fieldset id="currentPaymentFHSA" class="panel-default p-0">

                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Planned FHSA Additions</span></legend>
                        <div class="panel-body mrgn-lft-sm mrgn-bttm-lg">

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="paymentYears">Number of years you plan to add to your FHSA</label>
                                </div>
                                <div class="col-md-12">
                                    <div class="wb-input-range form-group mrgn-tp-xs mrgn-bttm-md">
                                        <datalist id="paymentYearsList" class="d-flex mrgn-tp-lg">
                                            <!--[if lte IE 9]><select><![endif]-->
                                            <option value="1" label="1"></option>
                                            <option value="5"></option>
                                            <option value="10"></option>
                                            <option value="15" label="15"></option>
                                            <!--[if lte IE 9]></select><![endif]-->
                                        </datalist>
                                        <input id="paymentYears" class="form-range" type="range" min="1" max="15" value="1" step="1" list="paymentYearsList">
                                        <output class="wb-input-range-display" id="paymentYearsOutput"></output>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="paymentAmount">Amount you plan to add yearly to FHSA<span class="wb-inv"> (in $250 increments)</span></label>
                                </div>
                                <div class="col-md-12">
                                    <div class="wb-input-range form-group mrgn-tp-xs mrgn-bttm-md">
                                        <datalist id="paymentAmountList" class="d-flex mrgn-tp-lg">
                                            <!--[if lte IE 9]><select><![endif]-->
                                            <option value="0" label="$0"></option>
                                            <option value="1000"></option>
                                            <option value="2000"></option>
                                            <option value="3000"></option>
                                            <option value="4000"></option>
                                            <option value="5000"></option>
                                            <option value="6000"></option>
                                            <option value="7000"></option>
                                            <option value="8000" label="$8,000"></option>
                                            <!--[if lte IE 9]></select><![endif]-->
                                        </datalist>
                                        <input id="paymentAmount" class="form-range" type="range" min="0" max="8000" value="0" step="250" list="paymentAmountList">
                                        <output class="wb-input-range-display" data-wb-input-range='{"func": "currencyFormatter.format"}' id="paymentAmountOutput"></output>
                                    </div>
                                </div>
                            </div>

                            <div class="clearfix"></div>

                            <div class="mrgn-lft-md gc-chckbxrdio chckbxrdio-grp gc-font-2019 provisional">
                                <fieldset id="hasPaymentInvestment-question" class="mrgn-lft-md gc-chckbxrdio chckbxrdio-grp gc-font-2019 provisional">

                                    <legend class="h5 required" tabindex="-1"><span class="field-name gc-font-2019">Would you like to include the investment growth for your FHSA?</span> <strong class="required">(required)</strong></legend>

                                    <ul class="list-unstyled">
                                        <li class="radio">
                                            <input type="radio" name="hasPaymentInvestment" id="hasPaymentInvestment-true" value="true" data-haspaymentinvestment="true" data-rule-required="true" required="required">
                                            <label for="hasPaymentInvestment-true">Yes</label>
                                        </li>
                                        <li class="radio">
                                            <input type="radio" name="hasPaymentInvestment" id="hasPaymentInvestment-false" value="false" data-haspaymentinvestment="false" data-rule-required="true" required="required">
                                            <label for="hasPaymentInvestment-false">No</label>
                                        </li>
                                    </ul>
                                </fieldset>
                            </div>

                            <div id="paymentInvestPercentGroup" class="form-group hidden">
                                <div class="mrgn-lft-md">
                                    <label for="paymentInterest">Expected annual rate of return from investments</label>
                                    <p><a href="#returnrate-help" aria-controls="returnrate-help" class="wb-lbx" role="button">What is a rate of return?<span class="glyphicon glyphicon-question-sign"></span></a></p>
                                </div>
                                <div class="input-group mrgn-lft-md col-xs-5 col-sm-2">
                                    <input type="text" name="paymentInterest" value="" id="paymentInterest" class="form-control input-lg text-right" inputmode="decimal" pattern="[0-9]+\.?[0-9]*">
                                    <span class="input-group-addon">%</span>
                                </div>
                            </div>

                            <div class="clearfix"></div>
                            <button id="paymentresultsbtn" type="button" class="mrgn-lft-md mrgn-tp-md mrgn-bttm-md btn btn-primary btn-lg" data-btn-activated="Update results">Generate results</button>
                            <div class="col-xs-12 table-responsive">
                                <div id="holdingsResults" class="hidden" aria-live="polite">
                                    <hr>
                                    <h3>Account holdings estimate</h3>
                                    <p class="small">based on the numbers you entered:</p>
                                    <p>Your possible FHSA savings towards your down payment could be approximately:</p>
                                    <ul class="list-unstyled">
                                        <li><strong data-output="holdings-total">$0</strong> in account holdings</li>
                                        <li id="paymentGrowthResult"><strong data-output="investment-growth-total">$0</strong> in growth</li>
                                    </ul>
                                    <p>Over <strong data-output="payment-years">0</strong> year<span data-payment-year-range="true">s</span></p>

                                    <table id="holdingsresultstable" class="text-right table table-condensed table-bordered table-striped table-hover" data-wb-charts='{"reversettblparsing": true, "legendinline": true}' data-flot='{"series": {"area": {"label": {"show": true}}}}'>
                                        <caption>Account holdings by type</caption>
                                        <thead>
                                            <tr class="bg-primary">
                                                <th class="text-left">Years</th>
                                                <th class="text-right" data-flot='{"color":"#2d7da6"}'>Amounts added</th>
                                                <th class="text-right" data-flot='{ "area":{"show": false}}'>Investment income</th>
                                                <th class="text-right" data-flot='{"color":"#285228"}'>Account holdings</th>
                                            </tr>
                                        </thead>
                                        <tbody id="holdingsResultsBody" data-prior-payment-year-rows="1 to ">
                                        </tbody>
                                    </table>
                                    <div id="results1"></div>
                                </div>
                            </div>
                        </div>
                    </fieldset>
                    <input id="calc-paymemt-fhsa" class="btn btn-primary hidden" type="submit" value="Generate results">
                </form>
            </div>
        </div>




        <div class="row">
            <div class="col-sm-12">
                <h2>Potential tax savings</h2>
                <p>Find out how much an individual can potentially save with the First Home Savings Account</p>
            </div>
            <div class="wb-frmvld col-sm-12 provisional wb-steps">
                <form id="fhsa_taxsavings_form" name="fhsa_cal_form" action="#" method="get" autocomplete="off" class="panel panel-default mrgn-bttm-md">




                    <!-- Form 2 STEP 1-->
                    <fieldset id="priorBalance" class="panel-default p-0">
                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">FHSA prior years additions</span></legend>
                        <div class="panel-body mrgn-lft-sm">

                            <fieldset id="priorSavingBalance-question" class="mrgn-lft-md gc-chckbxrdio chckbxrdio-grp gc-font-2019 provisional">

                                <legend class="h5 required" tabindex="-1"><span class="gc-font-2019">Did you add to your FHSA in prior years?</span> <strong class="required">(required)</strong></legend>

                                <ul class="list-unstyled">
                                    <li class="radio">
                                        <input type="radio" name="hasPriorSavingFHSA" id="priorsaving-fhsa-true" value="true" data-priorsaving-fhsa="true" data-rule-required="true">
                                        <label for="priorsaving-fhsa-true">Yes</label>
                                    </li>
                                    <li class="radio">
                                        <input type="radio" name="hasPriorSavingFHSA" id="priorsaving-fhsa-false" value="false" data-priorsaving-fhsa="false" data-rule-required="true">
                                        <label for="priorsaving-fhsa-false">No</label>
                                    </li>
                                </ul>
                            </fieldset>


                            <div id="priorSavingFHSAfields" class="mrgn-lft-md hidden">
                                <div id="priorSavingAmountFHSAElm" class="form-group">
                                    <label id="priorSavingYearsFHSALabel" for="priorSavingYearsFHSA" class="required"><span class="field-name">Number of prior years you added to your FHSA</span> (<span data-prior-year-range="true">1 to </span><span data-max-prior-years="true">14</span> year<span data-prior-year-range="true">s</span>) <strong id="priorSavingYearsFHSALabelRequire" class="required">(required)</strong></label>
                                    <div class="input-group col-xs-2 col-sm-1">
                                        <input type="number" name="priorSavingYearsFHSA" min="1" max="14" value="" id="priorSavingYearsFHSA" class="form-control text-right" data-rule-minlength="1" data-rule-maxlength="2" data-rule-rangelength="[1,14]">
                                    </div>
                                </div>
                                <div id="priorSavingYearsFHSAElm" class="form-group">
                                    <label id="priorSavingAmountFHSALabel" for="priorSavingAmountFHSA" class="required"><span class="field-name">Your total FHSA additions for prior years</span><span class="wb-inv"> (dollars only, no cents)</span> <strong id="priorSavingAmountFHSALabelRequire" class="required">(required)</strong></label>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorSavingAmountFHSA" size="7" maxlength="7" value="" id="priorSavingAmountFHSA" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" max="40000" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                                <div id="priorSavingYearsInvestElm" class="form-group">
                                    <label id="priorSavingYearsInvestLabel" for="priorSavingYearsInvest" class="required"><span class="field-name">Your FHSA investment income for prior years</span><span class="wb-inv"> (dollars only, no cents)</span> <strong id="priorSavingYearsInvestRequire" class="required"> (required)</strong></label>
                                    <div class="input-group col-lg-3 col-sm-4 col-xs-7">
                                        <span class="input-group-addon">$</span>
                                        <input type="text" name="priorSavingYearsInvest" size="7" maxlength="7" value="" id="priorSavingYearsInvest" class="form-control input-lg text-right" inputmode="numeric" pattern="[0-9]*" data-rule-digits="true">
                                        <span class="input-group-addon">.00</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </fieldset>




                    <!-- Form 2 STEP 2-->
                    <fieldset id="currentSavingsFHSA" class="panel-default p-0">

                        <legend class="panel-heading mrgn-bttm-0"><span class="panel-title">Planned FHSA Additions</span></legend>
                        <div class="panel-body mrgn-lft-md mrgn-bttm-lg">

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="province" class="required"><span class="field-name">Province or Territory of residence</span> <strong class="required">(required)</strong></label>
                                </div>
                                <select name="province" id="province" class="form-control input-lg mrgn-lft-md" required="required" data-fed="Federal">
                                    <option value="">Select residence location</option>
                                    <option value="Alberta">Alberta</option>
                                    <option value="British Columbia">British Columbia</option>
                                    <option value="Manitoba">Manitoba</option>
                                    <option value="New Brunswick">New Brunswick</option>
                                    <option value="Newfoundland and Labrador">Newfoundland and Labrador</option>
                                    <option value="Northwest Territories">Northwest Territories</option>
                                    <option value="Nova Scotia">Nova Scotia</option>
                                    <option value="Nunavut">Nunavut</option>
                                    <option value="Ontario">Ontario</option>
                                    <option value="Prince Edward Island">Prince Edward Island</option>
                                    <option value="Quebec">Quebec</option>
                                    <option value="Saskatchewan">Saskatchewan</option>
                                    <option value="Yukon">Yukon</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="approxYearlyIncome" class="required"><span class="field-name">Approximate yearly income</span><span class="wb-inv"> (dollars only, no cents)</span> <strong class="required">(required)</strong></label>
                                </div>
                                <div class="input-group mrgn-lft-md col-lg-3 col-sm-4 col-xs-6">
                                    <span class="input-group-addon">$</span>
                                    <input type="text" name="approxYearlyIncome" size="7" maxlength="7" value="" id="approxYearlyIncome" class="form-control input-lg text-right" required="required" inputmode="decimal" pattern="[0-9]*">
                                    <span class="input-group-addon">.00</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="mrgn-lft-md">
                                    <label for="savingYears"><span class="field-name">Number of years adding to FHSA</span></label>
                                </div>
                                <div class="clearfix"></div>
                                <div class="col-md-12">
                                    <div class="wb-input-range form-group mrgn-tp-xs mrgn-bttm-md">
                                        <datalist id="savingYearsList" class="d-flex mrgn-tp-lg">
                                            <!--[if lte IE 9]><select><![endif]-->
                                            <option value="1" label="1"></option>
                                            <option value="5"></option>
                                            <option value="10"></option>
                                            <option value="15" label="15"></option>
                                            <!--[if lte IE 9]></select><![endif]-->
                                        </datalist>
                                        <input id="savingYears" class="form-range" type="range" min="1" max="15" value="1" step="1" list="savingYearsList">
                                        <output class="wb-input-range-display" id="savingYearsOutput"></output>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <p class="h3 mrgn-tp-lg">The amount directly contributed is a portion of the amount added and cannot exceed that value</p>
                            <div class="well mrgn-rght-md">
                                <div class="form-group">
                                    <div class="mrgn-lft-md">
                                        <label for="savingsAmount"><span class="field-name">Amount added yearly to FHSA</span><span class="wb-inv"> (in $250 increments)</span></label>
                                    </div>
                                    <div class="clearfix"></div>
                                    <div class="col-md-12">
                                        <div class="wb-input-range form-group mrgn-tp-xs mrgn-bttm-md">
                                            <datalist id="yearlySavingsAmountList" class="d-flex mrgn-tp-lg">
                                                <!--[if lte IE 9]><select><![endif]-->
                                                <option value="0" label="$0"></option>
                                                <option value="1000"></option>
                                                <option value="2000"></option>
                                                <option value="3000"></option>
                                                <option value="4000"></option>
                                                <option value="5000"></option>
                                                <option value="6000"></option>
                                                <option value="7000"></option>
                                                <option value="8000" label="$8,000"></option>
                                                <!--[if lte IE 9]></select><![endif]-->
                                            </datalist>
                                            <input id="savingsAmount" class="form-range" type="range" min="0" max="8000" value="0" step="250" list="yearlySavingsAmountList">
                                            <output class="wb-input-range-display" data-wb-input-range='{"func": "currencyFormatter.format"}' id="savingsAmountOutput"></output>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="mrgn-lft-md">
                                        <label for="savingsDirectAmount"><span class="field-name">Amount directly contributed (not transferred)</span><span class="wb-inv"> (in $250 increments)</span></label>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="wb-input-range form-group mrgn-tp-xs mrgn-bttm-md">
                                            <datalist id="savingsDirectAmountList" class="d-flex mrgn-tp-lg">
                                                <!--[if lte IE 9]><select><![endif]-->
                                                <option value="0" label="$0"></option>
                                                <option value="1000"></option>
                                                <option value="2000"></option>
                                                <option value="3000"></option>
                                                <option value="4000"></option>
                                                <option value="5000"></option>
                                                <option value="6000"></option>
                                                <option value="7000"></option>
                                                <option value="8000" label="$8,000"></option>
                                                <!--[if lte IE 9]></select><![endif]-->
                                            </datalist>
                                            <input id="savingsDirectAmount" class="form-range" type="range" min="0" max="8000" value="0" step="250" list="savingsDirectAmountList">
                                            <output class="wb-input-range-display" data-wb-input-range='{"func": "currencyFormatter.format"}'  id="savingsDirectAmountOutput"></output>
                                        </div>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </div>


                            <div class="mrgn-lft-md gc-chckbxrdio chckbxrdio-grp gc-font-2019 provisional">
                                <fieldset id="hasSavingInvestment-question" class="mrgn-lft-md gc-chckbxrdio chckbxrdio-grp gc-font-2019 provisional">

                                    <legend class="h5 required" tabindex="-1"><span class="field-name gc-font-2019">Would you like to include the investment growth for your FHSA?</span> <strong class="required">(required)</strong></legend>

                                    <ul class="list-unstyled">
                                        <li class="radio">
                                            <input type="radio" name="hasSavingInvestment" id="hasSavingInvestment-true" value="true" data-hassavinginvestment="true" data-rule-required="true" required="required">
                                            <label for="hasSavingInvestment-true">Yes</label>
                                        </li>
                                        <li class="radio">
                                            <input type="radio" name="hasSavingInvestment" id="hasSavingInvestment-false" value="false" data-hassavinginvestment="false" data-rule-required="true" required="required">
                                            <label for="hasSavingInvestment-false">No</label>
                                        </li>
                                    </ul>
                                </fieldset>

                            </div>

                            <div id="savingInvestPercentGroup" class="form-group hidden">
                                <div class="mrgn-lft-md">
                                    <label for="savingInterest"><span class="field-name">Expected rate of return from qualifying investments</span></label>
                                    <p><a href="#returnrate-help" aria-controls="returnrate-help" class="wb-lbx" role="button">What is a rate of return?<span class="glyphicon glyphicon-question-sign"></span></a></p>
                                </div>
                                <div class="input-group mrgn-lft-md col-xs-5 col-sm-2">
                                    <input type="text" name="savingInterest" value="" id="savingInterest" class="form-control input-lg text-right" inputmode="decimal" pattern="[0-9]+\.?[0-9]*">
                                    <span class="input-group-addon">%</span>
                                </div>
                            </div>


                            <div class="clearfix"></div>
                            <button id="savingsresultsbtn" type="button" class="mrgn-lft-md mrgn-tp-md mrgn-bttm-md btn btn-primary btn-lg" data-btn-activated="Update results">Generate results</button>

                            <div id="savingsResults" class="table-responsive hidden" aria-live="polite">
                                <hr>
                                <h3>Potential savings</h3>
                                <p class="small">based on the numbers you entered:</p>
                                <p>Your possible FHSA tax savings could be approximately:</p>
                                <ul class="list-unstyled">
                                    <li><span data-output="area-tax"><strong>$0</strong> to <strong>$0</strong></span> in <span data-area-name="provincial-territorial">Provincial and Territorial</span> tax</li>
                                    <li><span data-output="fed-tax"><strong>$0</strong> to <strong>$0</strong></span> in Federal tax</li>
                                </ul>
                                <p>Over <strong data-output="saving-years">0</strong> year<span data-savings-year-range="true">s</span></p>

                                <table id="savingsTable" class="table table-condensed table-bordered table-striped table-hover">
                                    <caption>Your possible FHSA tax savings</caption>
                                    <thead>
                                        <tr>
                                            <th>Years</th>
                                            <th class="col-sm-2 text-right">FHSA amount added holdings (cumulative)</th>
                                            <th class="col-sm-2 text-right">Deductible FHSA Contributions</th>
                                            <th class="col-sm-1 text-right">Qualifed Investment Amount</th>
                                            <th class="text-right">Possible <span data-area-name="provincial-territorial">Provincial and Territorial</span> tax savings</th>
                                            <th class="text-right">Possible Federal tax savings</th>
                                        </tr>
                                    </thead>
                                    <tbody id="savingsResultsBody" class="text-right" data-prior-savings-year-rows="1 to " data-savings-range-text=" to " data-savings-text="up to " data-total-header="Total">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </fieldset>
                    <input id="calc-savings-fhsa" class="btn btn-primary hidden" type="submit" value="Generate results">
                </form>
            </div>

        </div>
        <section id="returnrate-help" class="mfp-hide modal-dialog modal-content overlay-def">
            <header class="modal-header">
                <h2 class="modal-title">Rate of return</h2>
            </header>
            <div class="modal-body">
                <p>Explanation of rate of return</p>
            </div>
        </section>
        <template id="noInvestText">
            <abbr title="Not applicable">N/A</abbr>
        </template>
        </div>

        <!--		 <section class="alert alert-danger">
  <h3>Disclaimer</h3>
  <p>The estimator’s results are rough estimates and are based on the information that you provided. The results should not be considered financial advice. The calculator does not save or collect any of your personal information.</p>
</section> -->


        <div class="mwsgeneric-base-html parbase section">









        </div>
        <div class="mwsgeneric-base-html parbase section">



            <div class="row row-no-gutters mrgn-tp-xl">
                <div class="col-sm-7 col-lg-6">
                    <section class="gc-pg-hlpfl provisional">
                        <div class="well mrgn-bttm-0">
                            <form id="gc-pg-hlpfl-frm" action="/gc/services/generateemail" method="post" autocomplete="off" class="provisional wb-postback" data-wb-postback="{&quot;success&quot;:&quot;.gc-pg-hlpfl-thnk&quot;,&quot;content&quot;:&quot;#gc-pg-hlpfl-frm&quot;}">
                                <input type="hidden" name="institutionopt" value="CRA">
                                <input type="hidden" name="themeopt" value="Taxes">
                                <input type="hidden" name="sectionopt" value="FHSA">

                                <input type="hidden" name="pageTitle" value="Opening and closing your FHSAs">

                                <input type="hidden" name="emailTemplate" value="servcan/gc-pagesuccessen">
                                <div class="gc-pg-hlpfl-btn">
                                    <div class="row row-no-gutters">
                                        <div class="col-xs-12 col-sm-7 mrgn-tp-sm">
                                            <h2 class="mrgn-tp-sm h5">Did you find what you were looking for?</h2>
                                        </div>
                                        <div class="col-xs-8 col-sm-5 text-right">
                                            <button type="submit" name="helpful" value="Yes" class="btn btn-primary" data-gc-analytics-wtph>Yes</button>
                                            <button type="button" class="btn btn-primary mrgn-lft-sm nojs-hide" data-wb-doaction="[{&quot;action&quot;:&quot;removeClass&quot;,&quot;source&quot;:&quot;.gc-pg-hlpfl-no&quot;,&quot;class&quot;:&quot;nojs-show&quot;}, {&quot;action&quot;:&quot;addClass&quot;,&quot;source&quot;:&quot;.gc-pg-hlpfl-btn&quot;,&quot;class&quot;:&quot;hide&quot;}]" data-gc-analytics-wtph-no>No</button>
                                        </div>
                                    </div>
                                </div>
                                <p class="h3 hidden nojs-show">If not, tell us why:</p>
                                <div class="gc-pg-hlpfl-no nojs-show">
                                    <fieldset>
                                        <legend class="h4 mrgn-tp-0 mrgn-bttm-md">What was wrong?</legend>

                                        <div class="radio">
                                            <label for="problem1">
                                                <input name="problem" id="problem1" type="radio" value="I can't find the information" data-gc-analytics-wtph-value="I can't find the information-Je ne peux pas trouver l'information" data-gc-analytics-collect="notPrivate">
						I can't <strong>find</strong> the information
                                            </label>
                                        </div>

                                        <div class="radio">
                                            <label for="problem2">
                                                <input name="problem" id="problem2" type="radio" value="The information is hard to understand" data-gc-analytics-wtph-value="The information is hard to understand-L'information est difficile à comprendre" data-gc-analytics-collect="notPrivate"> 
						    The information is hard to <strong>understand</strong>
                                            </label>
                                        </div>

                                        <div class="radio">
                                            <label for="problem3">
                                                <input name="problem" id="problem3" type="radio" value="There was an error / something didn't work" data-gc-analytics-wtph-value="There was an error or something didn't work-Il y avait une erreur ou quelque chose ne fonctionnait pas" data-gc-analytics-collect="notPrivate">
						    There was an error or something <strong>didn't work</strong>
                                            </label>
                                        </div>

                                        <div class="radio">
                                            <label for="problem4">
                                                <input name="problem" id="problem4" type="radio" value="Other reason" data-gc-analytics-wtph-value="Other reason-Autre raison" data-gc-analytics-collect="notPrivate">
                                                Other reason
                                            </label>
                                        </div>
                                    </fieldset>
                                    <label for="problem6" class="mrgn-bttm-0">Please provide more details</label>
                                    <p class="small">
                                        <strong>You will not receive a reply. Telephone numbers and email addresses will be removed.</strong>
                                        <br><span class="small">Maximum 300 characters</span>
                                    </p>
                                    <textarea id="problem6" name="details" class="full-width" maxlength="300"></textarea>
                                    <button type="submit" name="helpful" value="No" class="btn btn-primary mrgn-tp-md mrgn-bttm-sm" data-gc-analytics-wtph-submit>Submit</button>
                                </div>
                                <input type="hidden" name="problem" value="">
                            </form>
                            <div class="gc-pg-hlpfl-thnk hide">
                                <p class="h6 mrgn-tp-sm mrgn-bttm-sm"><span class="far fa-check-circle text-success mrgn-rght-sm" aria-hidden="true"></span>Thank you for your feedback</p>
                            </div>
                        </div>
                    </section>
                </div>
                <div class="col-sm-3 col-sm-offset-1 col-lg-offset-3">
                    <div class="wb-share" data-wb-share="{&quot;pnlId&quot;:&quot;pnlShrPg&quot;, &quot;lnkClass&quot;: &quot;btn btn-default btn-block mrgn-tp-md&quot;}"></div>
                </div>
            </div>


        </div>


        <div class="pagedetails">

            <dl id="wb-dtmd">
                <dt>Date modified:</dt>
                <dd><time property="dateModified">2023-04-12</time></dd>
            </dl>
        </div>
    </main>












    <div class="newpar new section">

    </div>




    <div class="par iparys_inherited">






    </div>














    <div class="newpar new section">

    </div>




    <div class="par iparys_inherited">







        <div class="global-footer">
            <footer id="wb-info">
                <h2 class="wb-inv">About this site</h2>
                <div class="gc-contextual">
                    <div class="container">
                        <nav>
                            <h3>Canada Revenue Agency (CRA)</h3>
                            <ul class="list-col-xs-1 list-col-sm-2 list-col-md-3">
                                <li><a href="/en/revenue-agency/corporate/contact-information.html">Contact the CRA</a></li>

                                <li><a href="/en/revenue-agency/corporate/about-canada-revenue-agency-cra.html">About the CRA</a></li>

                                <li><a href="/en/revenue-agency/programs/about-canada-revenue-agency-cra/compliance.html">Compliance and enforcement</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="gc-main-footer">
                    <div class="container">
                        <nav>
                            <h3>Government of Canada</h3>
                            <ul class="list-unstyled colcount-sm-2 colcount-md-3">
                                <li><a href="/en/contact.html">All contacts</a></li>
                                <li><a href="/en/government/dept.html">Departments and agencies</a></li>
                                <li><a href="/en/government/system.html">About government</a></li>
                            </ul>
                            <h4><span class="wb-inv">Themes and topics</span></h4>
                            <ul class="list-unstyled colcount-sm-2 colcount-md-3">
                                <li><a href="/en/services/jobs.html">Jobs</a></li>
                                <li><a href="/en/services/immigration-citizenship.html">Immigration and citizenship</a></li>
                                <li><a href="https://travel.gc.ca/">Travel and tourism</a></li>
                                <li><a href="/en/services/business.html">Business</a></li>
                                <li><a href="/en/services/benefits.html">Benefits</a></li>
                                <li><a href="/en/services/health.html">Health</a></li>
                                <li><a href="/en/services/taxes.html">Taxes</a></li>
                                <li><a href="/en/services/environment.html">Environment and natural resources</a></li>
                                <li><a href="/en/services/defence.html">National security and defence</a></li>
                                <li><a href="/en/services/culture.html">Culture, history and sport</a></li>
                                <li><a href="/en/services/policing.html">Policing, justice and emergencies</a></li>
                                <li><a href="/en/services/transport.html">Transport and infrastructure</a></li>
                                <li><a href="https://international.gc.ca/world-monde/index.aspx?lang=eng">Canada and the world</a></li>
                                <li><a href="/en/services/finance.html">Money and finance</a></li>
                                <li><a href="/en/services/science.html">Science and innovation</a></li>
                                <li><a href="/en/services/indigenous-peoples.html">Indigenous peoples</a></li>
                                <li><a href="/en/services/veterans-military.html">Veterans and military</a></li>
                                <li><a href="/en/services/youth.html">Youth</a></li>
                            </ul>
                        </nav>
                    </div>

                </div>
                <div class="gc-sub-footer">
                    <div class="container d-flex align-items-center">
                        <nav>
                            <h3 class="wb-inv">Government of Canada Corporate</h3>
                            <ul>

                                <li><a href="https://www.canada.ca/en/social.html">Social media</a></li>
                                <li><a href="https://www.canada.ca/en/mobile.html">Mobile applications</a></li>
                                <li><a href="https://www.canada.ca/en/government/about.html">About Canada.ca</a></li>

                                <li><a href="/en/transparency/terms.html">Terms and conditions</a></li>
                                <li><a href="/en/revenue-agency/corporate/privacy-notice.html">Privacy</a></li>
                            </ul>
                        </nav>
                        <div class="wtrmrk align-self-end">
                            <img src="/etc/designs/canada/wet-boew/assets/wmms-blk.svg" alt="Symbol of the Government of Canada" />
                        </div>
                    </div>
                </div>
            </footer>

        </div>



    </div>














    <script type="text/javascript">
        _satellite.pageBottom();
    </script>






    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/ep-pp.min.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/wet-boew.min.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/js/theme.min.js"></script>

    <script src="https://www.canada.ca/etc/designs/canada/wet-boew/méli-mélo/2023-10-mount-revelstoke.min.js"></script>
    <script src="/data/income_rates.js"></script>
    <script>
        "use strict";

        const maxContribution = 40000, 
            yearlyMaxContribution = 8000, 
            priorYearMax = 14, 
            fhsaStartYear = 2023;

        let currentYear, 
            paymentformId = "#fhsa_downpay_form", 
            savingsformId = "#fhsa_taxsavings_form", 
            pagelang = document.documentElement.lang, 
            currencyFormatter = new Intl.NumberFormat(pagelang + "-CA", {
                style: "currency", 
                currency: "CAD", 
                minimumFractionDigits: 0, 
                maximumFractionDigits: 0, 
                roundingPriority: "auto", 
                roundingMode: "trunc"
            }), 
            /*
            percentFormatter = new Intl.NumberFormat(pagelang + "-CA", {
              style: "percent", 
              minimumFractionDigits: 0, 
              maximumFractionDigits: 2, 
              roundingPriority: "auto", 
              roundingMode: "trunc"
            }), 
            */
            hasPriorPaymentFHSA = function () {
                return $(":input[type=radio][name=hasPriorPaymentFHSA]:checked", paymentformId).data("priorpayment-fhsa") || false;
            }, 
            priorPaymentYears = function () {
                if (hasPriorPaymentFHSA() === true) {
                    return parseInt($("#priorPaymentYearsFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            priorPaymentAmount = function () {
                if (hasPriorPaymentFHSA() === true) {
                    return parseInt($("#priorPaymentAmountFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            priorPaymentInvestment = function () {
                if (hasPriorPaymentFHSA() === true) {
                    return parseInt($("#priorPaymentYearsInvest").val(), 10) || 0;
                }
                return 0;
            }, 
            paymentYears = function () {
                return parseInt($("#paymentYears").val(), 10) || 0;
            }, 
            paymentAmount = function () {
                return parseInt($("#paymentAmount").val(), 10) || 0;
            }, 
            hasPaymentInvestGrowth = function () {
                return $(":input[type=radio][name=hasPaymentInvestment]:checked", paymentformId).data("haspaymentinvestment") || false;
            }, 
            paymentInterest = function () {
                if (hasPaymentInvestGrowth() === true) {
                    return parseInt($("#paymentInterest").val(), 10) / 100 || 0;
                }
                return 0;
            }, 
            hasPriorSavingFHSA = function () {
                return $(":input[type=radio][name=hasPriorSavingFHSA]:checked", savingsformId).data("priorsaving-fhsa") || false;
            }, 
            priorSavingYears = function () {
                if (hasPriorSavingFHSA() === true) {
                    return parseInt($("#priorSavingYearsFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            priorSavingAmount = function () {
                if (hasPriorSavingFHSA() === true) {
                    return parseInt($("#priorSavingAmountFHSA").val(), 10) || 0;
                }
                return 0;
            }, 
            priorSavingsInvestment = function () {
                if (hasPriorSavingFHSA() === true) {
                    return parseInt($("#priorSavingYearsInvest").val(), 10) || 0;
                }
                return 0;
            }, 
            province = function () {
                return $("#province").find(":selected").val() || null;
            }, 
            yearlyIncome = function () {
                return parseInt($("#approxYearlyIncome").val(), 10) || 0;
            }, 
            savingYears = function () {
                return parseInt($("#savingYears").val(), 10) || 0;
            }, 
            savingsAmount = function () {
                return parseInt($("#savingsAmount").val(), 10) || 0;
            }, 
            savingsDirectAmount = function () {
                return parseInt($("#savingsDirectAmount").val(), 10) || 0;
            }, 
            hasSavingInvestGrowth = function () {
                return $(":input[type=radio][name=hasSavingInvestment]:checked", savingsformId).data("hassavinginvestment") || false;
            }, 
            savingInterest = function () {
                if (hasSavingInvestGrowth() === true) {
                    return parseInt($("#savingInterest").val(), 10) / 100 || 0;
                }
                return 0;
            }, 
            initForms = function (fhsaStartYear, currentYear, priorYearMax, yearlyMaxContribution, maxContribution, paymentformId, savingsformId) {
                let adjustedPriorContributeMax;

                if (currentYear - fhsaStartYear <= priorYearMax && currentYear - fhsaStartYear * yearlyMaxContribution < maxContribution) {
                    adjustedPriorContributeMax = (currentYear - fhsaStartYear) * yearlyMaxContribution;
                } else {
                    adjustedPriorContributeMax = maxContribution;
                }
                updatePriorYearMax("#priorPaymentYearsFHSA", currentYear, fhsaStartYear, priorYearMax, paymentformId);
                $("#priorPaymentAmountFHSA").attr("max", adjustedPriorContributeMax);
                updatePriorYearMax("#priorSavingYearsFHSA", currentYear, fhsaStartYear, priorYearMax, savingsformId);
                $("#priorSavingAmountFHSA").attr("max", adjustedPriorContributeMax);
            }, 
            getCurrentYear = function (startYear) {
                var clientYear = new Date().getFullYear();
                if (clientYear <= startYear) {
                    return startYear + 1;
                }
                return clientYear;
            }, 
            generateHoldingsTableData = function (holdingYears, paymentAmount, hasInvestGrowth, investment, hasPriorPay, priorPaymentYrs, priorPayAmount, priorPayInvest, priorYearMax, maxContribution) {
                let yearIncrement, 
                    loopYears = priorPaymentYrs + holdingYears, 
                    amountCompound = 0, 
                    investmentCompound = 0, 
                    hasInvestment = hasInvestGrowth === true || priorPayInvest > 0, 
                    createHoldingsTableBody = function (evalYear, isPriorYear, amountCompound, hasInvestment, investmentCompound) {
                        let holdingCell, noInvestText, 
                            holdingRow = document.createElement("tr"), 
                            holdingHeader = document.createElement("th");

                        if (isPriorYear === true && evalYear > 1) {
                            holdingHeader.textContent = $("#holdingsResultsBody").data("prior-payment-year-rows") + evalYear;
                        } else {
                            holdingHeader.textContent = evalYear;
                        }
                        holdingRow.appendChild(holdingHeader);
                        holdingCell = document.createElement("td");
                        holdingCell.setAttribute("data-wb-charts-value", amountCompound + "$");
                        holdingCell.textContent = currencyFormatter.format(amountCompound);
                        holdingRow.appendChild(holdingCell);
                        holdingCell = document.createElement("td");
                        if (hasInvestment === true) {
                            holdingCell.textContent = currencyFormatter.format(investmentCompound);
                        } else {
                            if ("content" in document.createElement("template")) {
                                noInvestText = document.getElementById("noInvestText").content.cloneNode(true);
                            }
                            holdingCell.appendChild(noInvestText);
                        }
                        holdingRow.appendChild(holdingCell);
                        holdingCell = document.createElement("td");
                        holdingCell.setAttribute("data-wb-charts-value", amountCompound + investmentCompound + "$");
                        holdingCell.textContent = currencyFormatter.format(amountCompound + investmentCompound);
                        holdingRow.appendChild(holdingCell);
                        document.getElementById("holdingsResultsBody").appendChild(holdingRow);
                    };

                $("#holdingsResultsBody").html("");
                if (hasPriorPay === true) {
                    amountCompound = priorPayAmount;
                    investmentCompound = priorPayInvest;
                    createHoldingsTableBody(priorPaymentYrs, true, amountCompound, hasInvestment, investmentCompound);
                }

                if (amountCompound < maxContribution) {
                    if (loopYears >= priorYearMax + 1) {
                        loopYears = priorYearMax + 1;
                    }
                    for (yearIncrement = priorPaymentYrs + 1; yearIncrement <= loopYears; yearIncrement = yearIncrement + 1) {
                        if (amountCompound + paymentAmount < maxContribution) {
                            amountCompound = amountCompound + paymentAmount;
                        } else {
                            amountCompound = maxContribution;
                        }
                        investmentCompound = investmentCompound + (investmentCompound + amountCompound) * investment;
                        createHoldingsTableBody(yearIncrement, false, amountCompound, hasInvestment, investmentCompound);
                    }
                    return {
                        "addedAmount": amountCompound, 
                        "investment": investmentCompound, 
                        "yearsheld": loopYears
                    };
                }
            }, 
            generateSavingsTableData = function (area, federalName, income, savingYears, savingsAmount, savingsDirectAmount, hasInvestGrowth, investment, hasPriorSavings, priorSavingYears, priorSavingAmount, priorSavingsInvest, priorYearMax, maxContribution, startYear, currentYear, incomeRates, pagelang) {
                let yearIncrement, savingsRow, 
                    loopYears = priorSavingYears + savingYears, 
                    fedSavingsAmt, areaSavingsAmt, 
                    amountCompound = 0, 
                    investmentAmount = 0, 
                    investmentCompound = 0, 
                    deductContribAmt = 0, 
                    deductCumulative = 0, 
                    fedMinCumulative = 0, 
                    fedMaxCumulative = 0, 
                    areaMinCumulative = 0, 
                    areaMaxCumulative = 0, 
                    hasInvestment = hasInvestGrowth === true || priorSavingsInvest > 0, 
                    createSavingsTableBody = function (savingsRow, evalYear, amountCompound, investmentCompound, deductContribAmt, fedMinVal, fedMaxVal, areaMinVal, areaMaxVal, hasInvestment, isPriorYear, isTotal) {
                        let savingsCell, 
                            savingsHeader = document.createElement("th"), 
                            cellContentEval = function (savingsCell, cellContent, naCondCheck) {
                                let noInvestText;

                                if (naCondCheck) {
                                    if ("content" in document.createElement("template")) {
                                        noInvestText = document.getElementById("noInvestText").content.cloneNode(true);
                                    }
                                    savingsCell.appendChild(noInvestText);
                                } else {
                                    savingsCell.textContent = cellContent;
                                }
                                return savingsCell;
                            }, 
                            getRateCalcRange = function (minVal, maxVal) {
                                if (parseInt(minVal, 10) === parseInt(maxVal, 10)) {
                                    return $("#savingsResultsBody").data("savings-text") + currencyFormatter.format(maxVal);
                                }
                                return currencyFormatter.format(minVal) + $("#savingsResultsBody").data("savings-range-text") + currencyFormatter.format(maxVal);
                            };

                        if (isPriorYear === true && evalYear > 1) {
                            savingsHeader.textContent = $("#savingsResultsBody").data("prior-savings-year-rows") + evalYear;
                        } else {
                            savingsHeader.textContent = evalYear;
                        }
                        savingsRow.appendChild(savingsHeader);
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, currencyFormatter.format(amountCompound), isTotal === true));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, currencyFormatter.format(deductContribAmt), isPriorYear === true));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, currencyFormatter.format(investmentCompound), hasInvestment === false));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, getRateCalcRange(areaMinVal, areaMaxVal), isPriorYear === true));
                        savingsCell = document.createElement("td");
                        savingsRow.appendChild(cellContentEval(savingsCell, getRateCalcRange(fedMinVal, fedMaxVal), isPriorYear === true));
                        document.getElementById("savingsResultsBody").appendChild(savingsRow);
                    }, 
                    areaRates = function (area, incomeRates, rateYear, startYear, pagelang) {
                        let ratesArr, timeframeArr, evalYear, yearRateArrLen;

                        if (typeof incomeRates !== "undefined" && incomeRates.length > 0) {
                            ratesArr = incomeRates;
                            timeframeArr = ratesArr.find(function findLoc(rateLocs) {
                                return rateLocs[pagelang] === area;
                            }, pagelang, area);
                            for (yearRateArrLen = timeframeArr.timeframe.length - 1; yearRateArrLen >= 0; yearRateArrLen = yearRateArrLen - 1) {
                                for (evalYear = rateYear; evalYear >= startYear; evalYear = evalYear - 1) {
                                    if (timeframeArr.timeframe[yearRateArrLen].year === evalYear) {
                                        return timeframeArr.timeframe[yearRateArrLen];
                                    }
                                }
                            }
                        }
                        return {};
                    }, 
                    federalRates = areaRates(federalName, incomeRates, currentYear, startYear, pagelang), 
                    provinceRates = areaRates(area, incomeRates, currentYear, startYear, pagelang), 
                    getRefundAmount = function (income, qualifyDeductible, rates) {
                        let rateLoop, lastRate, 
                            maxlimit = 0, 
                            currentIncome = income;

                        for (rateLoop = rates.length - 1; rateLoop >= 0; rateLoop = rateLoop - 1) {
                            if (rates[rateLoop].threshold < currentIncome && rates[rateLoop].threshold < currentIncome - qualifyDeductible) {
                                maxlimit = qualifyDeductible * rates[rateLoop].rate;
                                break;
                            } else if (rates[rateLoop].threshold < currentIncome - qualifyDeductible) {
                                maxlimit = (rates[rateLoop].threshold) * rates[rateLoop].rate + (currentIncome - rates[rateLoop].threshold) * lastRate;
                                break;
                            }
                            lastRate = rates[rateLoop].rate;
                        }
                        return {
                            "min": qualifyDeductible * rates[0].rate, 
                            "max": maxlimit
                        };
                    };

                $("#savingsResultsBody").html("");
                if (hasPriorSavings === true) {
                    amountCompound = priorSavingAmount;
                    investmentCompound = priorSavingsInvest;
                    savingsRow = document.createElement("tr");
                    createSavingsTableBody(savingsRow, priorSavingYears, amountCompound, investmentCompound, 0, 0, 0, 0, 0, hasInvestment, true, false);
                }
                if (amountCompound < maxContribution) {
                    if (loopYears >= priorYearMax + 1) {
                        loopYears = priorYearMax + 1;
                    }
                    for (yearIncrement = priorSavingYears + 1; yearIncrement <= loopYears; yearIncrement = yearIncrement + 1) {
                        if (amountCompound + savingsAmount < maxContribution) {
                            deductContribAmt = savingsDirectAmount;

                            amountCompound = amountCompound + savingsAmount;
                        } else {
                            deductContribAmt = (savingsDirectAmount / savingsAmount) * (maxContribution - amountCompound);
                            amountCompound = maxContribution;
                        }
                        deductCumulative = deductCumulative + deductContribAmt;
                        investmentAmount = (investmentCompound + amountCompound) * investment;
                        investmentCompound = investmentCompound + investmentAmount;
                        fedSavingsAmt = getRefundAmount(income, investmentAmount + deductContribAmt, federalRates.rates);
                        areaSavingsAmt = getRefundAmount(income, investmentAmount + deductContribAmt, provinceRates.rates);
                        fedMinCumulative = fedMinCumulative + fedSavingsAmt.min;
                        fedMaxCumulative = fedMaxCumulative + fedSavingsAmt.max;
                        areaMinCumulative = areaMinCumulative + areaSavingsAmt.min;
                        areaMaxCumulative = areaMaxCumulative + areaSavingsAmt.max;
                        savingsRow = document.createElement("tr");
                        createSavingsTableBody(savingsRow, yearIncrement, amountCompound, investmentAmount, deductContribAmt, fedSavingsAmt.min, fedSavingsAmt.max, areaSavingsAmt.min, areaSavingsAmt.max, hasInvestment, false, false);
                    }
                    savingsRow = document.createElement("tr");
                    savingsRow.setAttribute("class", "success text-right");
                    createSavingsTableBody(savingsRow, $("#savingsResultsBody").data("total-header"), 0, investmentCompound, deductCumulative, fedMinCumulative, fedMaxCumulative, areaMinCumulative, areaMaxCumulative, hasInvestment, false, true);
                    return {
                        "fedAmountMin": fedMinCumulative, 
                        "fedAmountMax": fedMaxCumulative, 
                        "areaAmountMin": areaMinCumulative, 
                        "areaAmountMax": areaMaxCumulative, 
                        "yearssaved": loopYears
                    };
                }
            }, 
            updatePriorYearMax = function (maxYearId, currentYear, fhsaStartYear, priorYearMax, formId) {
                let adjustedPriorYears;

                if (currentYear - fhsaStartYear <= priorYearMax) {
                    adjustedPriorYears = currentYear - fhsaStartYear;
                } else {
                    adjustedPriorYears = priorYearMax;
                }
                $(maxYearId).attr("max", adjustedPriorYears);
                $(maxYearId).data("rule-rangelength", "[1," + adjustedPriorYears + "]");
                $("[data-max-prior-years=true]", formId).html(adjustedPriorYears);
                if (adjustedPriorYears < 2) {
                    $("[data-prior-year-range=true]", formId).addClass("hidden");
                }
            }, 
            updatePaymentResults = function (priorYearMax, maxContribution, paymentformId) {
                let paymentTotals = generateHoldingsTableData(paymentYears(), paymentAmount(), hasPaymentInvestGrowth(), paymentInterest(), hasPriorPaymentFHSA(), priorPaymentYears(), priorPaymentAmount(), priorPaymentInvestment(), priorYearMax, maxContribution);

                $("[data-output=holdings-total]", paymentformId).html(currencyFormatter.format(paymentTotals.addedAmount + paymentTotals.investment));
                if (hasPaymentInvestGrowth() === true || priorPaymentInvestment() > 0) {
                    $("#paymentGrowthResult", paymentformId).removeClass("hidden");
                    $("[data-output=investment-growth-total]", paymentformId).html(currencyFormatter.format(paymentTotals.investment));
                } else {
                    $("#paymentGrowthResult", paymentformId).addClass("hidden");
                }
                if (paymentTotals.yearsheld === 1) {
                    $("[data-payment-year-range=true]", paymentformId).addClass("hidden");
                }
                $("[data-output=payment-years]", paymentformId).html(paymentTotals.yearsheld);
            }, 
            updateSavingResults = function (incomeRates, currentYear, fhsaStartYear, priorYearMax, maxContribution, pagelang, savingsformId) {
                let fedTotal, areaTotal, 
                    savingsTotals = generateSavingsTableData(province(), $("#province").data("fed"), yearlyIncome(), savingYears(), savingsAmount(), savingsDirectAmount(), hasSavingInvestGrowth(), savingInterest(), hasPriorSavingFHSA(), priorSavingYears(), priorSavingAmount(), priorSavingsInvestment(), priorYearMax, maxContribution, fhsaStartYear, currentYear, incomeRates, pagelang);
                if (savingsTotals.yearsheld === 1) {
                    $("[data-savings-year-range=true]", savingsformId).addClass("hidden");
                }
                $("[data-output=saving-years]", savingsformId).html(savingsTotals.yearssaved);
                $("[data-area-name=provincial-territorial]", savingsformId).html(province());
                if (parseInt(savingsTotals.fedAmountMin, 10) === parseInt(savingsTotals.fedAmountMax, 10)) {
                    fedTotal = $("#savingsResultsBody").data("savings-text") + "<strong>" + currencyFormatter.format(savingsTotals.fedAmountMax) + "</strong>";
                } else {
                    fedTotal = "<strong>" + currencyFormatter.format(savingsTotals.fedAmountMin) + "</strong>" + $("#savingsResultsBody").data("savings-range-text") + "<strong>" + currencyFormatter.format(savingsTotals.fedAmountMax) + "</strong>";
                }
                if (parseInt(savingsTotals.areaAmountMin, 10) === parseInt(savingsTotals.areaAmountMax, 10)) {
                    areaTotal = $("#savingsResultsBody").data("savings-text") + "<strong>" + currencyFormatter.format(savingsTotals.areaAmountMax) + "</strong>"
                } else {
                    areaTotal = "<strong>" + currencyFormatter.format(savingsTotals.areaAmountMin) + "</strong>" + $("#savingsResultsBody").data("savings-range-text") + "<strong>" + currencyFormatter.format(savingsTotals.areaAmountMax) + "</strong>"
                }
                $("[data-output=fed-tax]", savingsformId).html(fedTotal);
                $("[data-output=area-tax]", savingsformId).html(areaTotal);
            };


        currentYear = getCurrentYear(fhsaStartYear);
        initForms(fhsaStartYear, currentYear, priorYearMax, yearlyMaxContribution, maxContribution, paymentformId, savingsformId);


        $(paymentformId).on("click vclick touchstart", "input[type=radio][name=hasPriorPaymentFHSA]", function () {
            if (hasPriorPaymentFHSA() === true) {
                $("#priorPaymentFHSAfields").removeClass("hidden");
                $("#priorPaymentYearsFHSA").attr("required", "required");
                $("#priorPaymentAmountFHSA").attr("required", "required");
                $("#priorPaymentYearsInvest").attr("required", "required");
                if (priorPaymentYears() === 0 && priorSavingYears() !== 0) {
                    $("#priorPaymentYearsFHSA").val($("#priorSavingYearsFHSA").val());
                }
                if (priorPaymentAmount() === 0 && priorSavingAmount() !== 0) {
                    $("#priorPaymentAmountFHSA").val($("#priorSavingAmountFHSA").val());
                }
                if (priorPaymentInvestment() === 0 && priorSavingsInvestment() !== 0) {
                    $("#priorPaymentYearsInvest").val($("#priorSavingYearsInvest").val());
                }
            } else {
                $("#priorPaymentFHSAfields").addClass("hidden");
                $("#priorPaymentYearsFHSA").removeAttr("required");
                $("#priorPaymentAmountFHSA").removeAttr("required");
                $("#priorPaymentYearsInvest").removeAttr("required");
            }
        });

        $(paymentformId).on("click vclick touchstart", "input[type=radio][name=hasPaymentInvestment]", function () {
            if (hasPaymentInvestGrowth() === true) {
                $("#paymentInvestPercentGroup").removeClass("hidden");
            } else {
                $("#paymentInvestPercentGroup").addClass("hidden");
            }
        });

        $(paymentformId).on("click vclick touchstart", "#paymentresultsbtn", function (event) {
            event.preventDefault();
            var isFormValid = true, 
                parentElement = this.parentElement, 
                parentPreviousClassList = parentElement.previousElementSibling.classList;

            if (jQuery.validator && jQuery.validator !== "undefined") {
                isFormValid = $(paymentformId).valid();
            }

            if (isFormValid === true) {
                if ($("#holdingsResults").hasClass("hidden") === true) {
                    $("#paymentresultsbtn").removeClass("btn-primary");
                    $("#paymentresultsbtn").addClass("btn-default");
                    $("#paymentresultsbtn").html($("#paymentresultsbtn").data("btn-activated"));
                    $("#holdingsResults").removeClass("hidden");
                }
                parentPreviousClassList.remove("wb-steps-error");
                /*
                    $("#holdingsresultstable").addClass("wb-charts wb-charts-area");
                    $("#holdingsresultstable").trigger("wb-init.wb-charts");
                */
                updatePaymentResults(priorYearMax, maxContribution, paymentformId);
            }

        });

        $(savingsformId).on("click vclick touchstart", "input[type=radio][name=hasPriorSavingFHSA]", function () {
            if (hasPriorSavingFHSA() === true) {
                $("#priorSavingFHSAfields").removeClass("hidden");
                $("#priorSavingYearsFHSA").attr("required", "required");
                $("#priorSavingAmountFHSA").attr("required", "required");
                $("#priorSavingYearsInvest").attr("required", "required");
                if (priorSavingYears() === 0 && priorPaymentYears() !== 0) {
                    $("#priorSavingYearsFHSA").val($("#priorPaymentYearsFHSA").val());
                }
                if (priorSavingAmount() === 0 && priorPaymentAmount() !== 0) {
                    $("#priorSavingAmountFHSA").val($("#priorPaymentAmountFHSA").val());
                }
                if (priorSavingsInvestment() === 0 && priorPaymentInvestment() !== 0) {
                    $("#priorSavingYearsInvest").val($("#priorPaymentYearsInvest").val());
                }
            } else {
                $("#priorSavingFHSAfields").addClass("hidden");
                $("#priorSavingYearsFHSA").removeAttr("required");
                $("#priorSavingAmountFHSA").removeAttr("required");
                $("#priorSavingYearsInvest").removeAttr("required");
            }
        });

        $(savingsformId).on("click vclick touchstart", "input[type=radio][name=hasSavingInvestment]", function () {
            if (hasSavingInvestGrowth() === true) {
                $("#savingInvestPercentGroup").removeClass("hidden");
            } else {
                $("#savingInvestPercentGroup").addClass("hidden");
            }
        });

        $(savingsformId).on("click vclick touchstart", "#savingsresultsbtn", function (event) {
            event.preventDefault();
            var isFormValid = true, 
                parentElement = this.parentElement, 
                parentPreviousClassList = parentElement.previousElementSibling.classList;

            if (jQuery.validator && jQuery.validator !== "undefined") {
                isFormValid = $(savingsformId).valid();
            }

            if (isFormValid === true) {
                if ($("#savingsResults").hasClass("hidden") === true) {
                    $("#savingsresultsbtn").removeClass("btn-primary");
                    $("#savingsresultsbtn").addClass("btn-default");
                    $("#savingsresultsbtn").html($("#savingsresultsbtn").data("btn-activated"));
                    $("#savingsResults").removeClass("hidden");
                }
                parentPreviousClassList.remove("wb-steps-error");
                updateSavingResults(incomeRates, currentYear, fhsaStartYear, priorYearMax, maxContribution, pagelang, savingsformId);
            }
        });

        $(savingsformId).on("change input", "#savingsAmount", function () {
            if (parseInt(document.getElementById("savingsAmount").value, 10) < parseInt(document.getElementById("savingsDirectAmount").value, 10)) {
                document.getElementById("savingsDirectAmount").value = document.getElementById("savingsAmount").value;
            }
        });

        $(savingsformId).on("change input", "#savingsDirectAmount", function (event) {
            if (parseInt(document.getElementById("savingsDirectAmount").value, 10) > parseInt(document.getElementById("savingsAmount").value, 10)) {
                document.getElementById("savingsDirectAmount").value = document.getElementById("savingsAmount").value;
                event.preventDefault();
                return false;
            }
        });
    </script>
    <script src="/script/wb-input-range.js"></script>
    <script>
        $(document).on("click", ".steps-wrapper div.buttons > :button", function (event) {
            let $form = $(this).parents("form:first");
            $form.find("legend.wb-steps-active").parents().prevAll().find("legend.panel-heading").addClass("prev-wb-step");
            $form.find("legend.wb-steps-active").parents().nextAll().find("legend.panel-heading").removeClass("prev-wb-step");
            $form.find("legend.wb-steps-active").removeClass("prev-wb-step").attr("tabindex", "0");
            $form.find("legend:not(.wb-steps-active)").attr("tabindex", "-1");
            //wrap with button
            $form.find("legend.wb-steps-active").parents().prevAll().find("legend.panel-heading").wrapInner("<button class=\"btn-link p-0 btn-lgnd\" type=\"button\"></button>");
            $form.find("fieldset legend.wb-steps-active").nextAll().addBack().find(".btn-lgnd").contents().unwrap();
            $form.find(".btn-lgnd .btn-lgnd").contents().unwrap();
        });
        $(document).on("click", ".prev-wb-step", function (event) {
            let $form = $(this).parents("form:first");
            $form.find(".wb-steps-active, legend.prev-wb-step").removeClass("wb-steps-active prev-wb-step");
            $form.find("legend + div.panel-body, .buttons").addClass("hidden");
            $form.find("legend.wb-steps-active").parents().nextAll().each(function (index) {});
            $(this).addClass("wb-steps-active").removeClass("prev-wb-step");
            $(this).parent().parent().find("legend + div.panel-body.hidden, .buttons").removeClass("hidden");
        });
    </script>
</body>
</html>
